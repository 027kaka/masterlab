<html>
<head>
  <title>jQuery.Shapeshift</title>
  <meta name="description" content="A dynamic grid system with drag and drop functionality." />
  <meta name="keywords" content="jquery,html,grid,drag,drop,pinterest,style">
 
  <!-- Libraries -->
  <script src="/dev/js/jquery.min.js"></script>
  <script src="/dev/lib/jquery-ui/jquery-ui.min.js"></script>
  
  <!-- Core Shapeshift Files -->
  <script type="text/JavaScript" src="../core/vendor/jquery.ui.touch-punch.min.js"></script>
  <script type="text/JavaScript" src="../core/jquery.shapeshift.min.js"></script>

  <!-- Template Files -->
  <link rel="stylesheet" type="text/css" href="template/css/reset.css">
  <link rel="stylesheet" type="text/css" href="template/css/template.css">
  <script src="template/javascript/template.js"></script>

  <!-- Demo Files -->
  <link rel="stylesheet" type="text/css" href="assets/demo.css">
  <script>

      // Generated by CoffeeScript 1.4.0
      (function() {

          $(function() {
              var $containers, child_count, filter_options, getRandomColor, renderChildren, renderPlaceholders;
              $containers = $(".ss-container");
              child_count = 4;
              (renderChildren = function() {
                  var weighted_colspans;
                  weighted_colspans = [ 4,4];
                  return $containers.each(function(container_i) {
                      var colspan, elements, height, i, _i;
                      elements = [];
                      for (i = _i = 0; 0 <= child_count ? _i < child_count : _i > child_count; i = 0 <= child_count ? ++_i : --_i) {
                          if (container_i === 0) {
                              colspan = weighted_colspans[Math.floor(Math.random() * weighted_colspans.length)];
                              height = colspan * 80 + ((colspan - 1) * 12);
                          } else {
                              height = Math.random() * 100 + 100;
                              colspan = 1;
                          }
                          elements.push("<li data-ss-colspan=" + colspan + " style='height:400px'><div class='position'>" + i + "</div></li>");
                      }
                      return $(this).append(elements.join(""));
                  });
              })();
              getRandomColor = function() {
                  var color, i, letters, _i, _ref;
                  letters = 'ABCDEF'.split('');
                  color = '';
                  for (i = _i = 0, _ref = letters.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
                      color += letters[Math.round(Math.random() * 5)];
                  }
                  return color;
              };
              (renderPlaceholders = function(type) {
                  return $containers.each(function() {
                      var $child, $children, background, height, i, width, _i, _results;
                      $children = $(this).children().not(".credits");
                      child_count = $children.length;
                      if (type === "index") {
                          return $(this).find(".position").show();
                      } else {
                          $(this).find(".position").hide();
                          _results = [];
                          for (i = _i = 0; 0 <= child_count ? _i < child_count : _i > child_count; i = 0 <= child_count ? ++_i : --_i) {
                              $child = $($children[i]);
                              height = $child.height();
                              width = $child.width();
                              switch (type) {
                                  case "fpoimg":
                                      background = 'url("http://fpoimg.com/' + width + 'x' + height + '?bg_color=' + getRandomColor() + '&text_color=444444")';
                                      break;
                                  case "placekittens":
                                      background = 'url("http://www.placekitten.com/' + width + '/' + height + '")';
                              }
                              _results.push($child.css({
                                  backgroundImage: background,
                                  height: height
                              }));
                          }
                          return _results;
                      }
                  });
              })("fpoimg");
              filter_options = {
                  minColumns: 3
              };
              $containers.shapeshift(filter_options);
              $(".options ul.animation li").on("click", function() {
                  switch ($(this).data("option")) {
                      case "enable":
                          filter_options.animated = true;
                          break;
                      default:
                          filter_options.animated = false;
                  }
                  return $containers.shapeshift(filter_options);
              });
              $(".options ul.dragndrop li").on("click", function() {
                  switch ($(this).data("option")) {
                      case "enable":
                          filter_options.enableDrag = true;
                          filter_options.enableDrop = true;
                          break;
                      default:
                          filter_options.enableDrag = false;
                          filter_options.enableDrop = false;
                  }
                  $containers.trigger('ss-destroy');
                  return $containers.shapeshift(filter_options);
              });
              $(".options ul.filtering li").on("click", function() {
                  switch ($(this).data("option")) {
                      case "hide":
                          $containers.children(":visible").sort(function() {
                              return Math.round(Math.random()) - 0.5;
                          }).first().hide();
                          break;
                      default:
                          $containers.children(":hidden").sort(function() {
                              return Math.round(Math.random()) - 0.5;
                          }).first().show();
                  }
                  return $containers.trigger("ss-rearrange");
              });
              $(".options ul.placeholders li").on("click", function() {
                  renderPlaceholders($(this).data("option"));
                  return $containers.shapeshift(filter_options);
              });
              $containers.on("ss-arranged", function(e, selected) {
                  var modifier;
                  modifier = $(this).find(".ss-dragging")[0] ? 1 : 0;
                  return $(this).children().each(function() {
                      return $(this).find(".position").text($(this).index() - modifier);
                  });
              });
              $containers.on("ss-rearranged", function(e, selected) {
                  console.log("----------------------------------------");
                  console.log("This container:");
                  console.log($(this));
                  console.log("Has rearranged this item:");
                  console.log($(selected));
                  return console.log("Into this position:", $(selected).index());
              });
              $containers.on("ss-removed", function(e, selected) {
                  console.log("----------------------------------------");
                  console.log("This item:");
                  console.log($(selected));
                  console.log("Has been removed from this container:");
                  return console.log($(this));
              });
              $containers.on("ss-added", function(e, selected) {
                  console.log("----------------------------------------");
                  console.log("This item:");
                  console.log($(selected));
                  console.log("Has been added to this container:");
                  return console.log($(this));
              });
              $containers.on("ss-trashed", function(e, selected) {
                  console.log("----------------------------------------");
                  console.log("This item:");
                  console.log($(selected));
                  return console.log("Has been removed from the DOM");
              });
              return $containers.on("ss-drop-complete", function(e) {
                  console.log("----------------------------------------");
                  console.log("This container:");
                  console.log($(this));
                  return console.log("Has finished rearrangement after a drop.");
              });
          });

      }).call(this);


  </script>
</head>
<body>
  <a href="https://github.com/McPants/jquery.shapeshift" class="fork-me">
    <img src="https://s3.amazonaws.com/github/ribbons/forkme_left_darkblue_121621.png" alt="Fork me on GitHub">
  </a>
  <a href="http://www.wtmworldwide.com" target="_blank" class="logo">We the Media</a>
  
  <header>
    <h1><a class="title" href="https://github.com/McPants/jquery.shapeshift">jQuery.Shapeshift</a></h1>

    <div class="details">
      <a class="toggle" href="#">Details</a>
      <ul>
        <li><strong>Column Grid System:</strong> All items flow from left to right, top to bottom.</li>
        <li><strong>Drag &amp; Drop:</strong> Click and drag elements to move them, even to different containers.</li>
        <li><strong>Responsive:</strong> Resize the browser window so see the grid change with the new dimensions.</li>
        <li><strong>Works on Touch:</strong> Enable drag and drop on touch devices by using the included <a href="http://touchpunch.furf.com/">jQuery UI Touch Punch</a>.</li>
        <li><div class="hr"></div></li>
        <li><strong>Importance over Style:</strong></li>
        <li>Shapeshift was designed to always render the same grid as long as the elements are in the same order.<br /> While this may leave holes, it is intentional as to favor higher index positioned elements over lower.</li>
      </ul>
    </div>

    <div class="hr"></div>

    <ul class="options">
      <li>
        <h4>Animation</h4>
        <ul class="btn-group toggle animation">
          <li data-option="enable" class="active">Enable</li>
          <li data-option="disable">Disable</li>
        </ul>
      </li>
      <li>
        <h4>Drag & Drop</h4>
        <ul class="btn-group toggle dragndrop">
          <li data-option="enable" class="active">Enable</li>
          <li data-option="disable">Disable</li>
        </ul>
      </li>
      <li>
        <h4>Filtering</h4>
        <ul class="btn-group filtering">
          <li data-option="show">Show Random</li>
          <li data-option="hide">Hide Random</li>
        </ul>
      </li>
      <li>
        <h4>Placeholders</h4>
        <ul class="btn-group toggle placeholders">
          <li data-option="fpoimg" class="active">FPOImg</li>
          <li data-option="placekittens">Placekittens</li>
          <li data-option="index">Index Positions</li>
        </ul>
      </li>
    </ul>
  </header>

  <div class="content">
    <ul class="ss-container"></ul>

  </div>

  <footer>
    <div>jQuery.Shapeshift uses the <a href="https://github.com/McPants/jquery.shapeshift/blob/master/LICENSE">MIT license</a></div>
    <div>Placeholder images provided by <a href="http://fpoimg.com">FPOImg.com</a> and <a href="http://placekitten.com">Placekitten.com</a>.</div>
  </footer>
</body>
</html>