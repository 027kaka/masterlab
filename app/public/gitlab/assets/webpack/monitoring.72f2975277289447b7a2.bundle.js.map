{"version":3,"sources":["webpack:///monitoring.72f2975277289447b7a2.bundle.js","webpack:///./monitoring/monitoring_bundle.js","webpack:///./monitoring/prometheus_graph.js","webpack:///./lib/utils/http_status.js?3fa3**"],"names":["webpackJsonp","IO1F","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__prometheus_graph__","document","addEventListener","onLoad","removeEventListener","P//+","$","_classCallCheck","instance","Constructor","TypeError","__WEBPACK_IMPORTED_MODULE_0_d3__","__WEBPACK_IMPORTED_MODULE_0_d3___default","n","__WEBPACK_IMPORTED_MODULE_1__lib_utils_http_status__","__WEBPACK_IMPORTED_MODULE_1__lib_utils_http_status___default","__WEBPACK_IMPORTED_MODULE_2__lib_utils_number_utils__","__WEBPACK_IMPORTED_MODULE_3__flash__","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","prometheusContainer","prometheusGraphsContainer","timeFormat","a","time","format","dayFormat","bisectDate","bisector","d","left","extraAddedWidthParent","PrometheusGraph","this","$prometheusContainer","hasMetrics","data","docLink","integrationLink","ajaxError","margin","top","right","bottom","marginLabelContainer","parentContainerWidth","parent","width","originalWidth","originalHeight","height","backOffRequestCounter","configureGraph","init","state","updateState","_this","keys","graphSpecificProperties","forEach","plotValues","_this2","getData","then","metricsResponse","enoughData","metrics","currentKey","transformData","createGraph","graphSpecifics","x","scale","range","y","linear","xScale","yScale","prometheusGraphContainer","chart","select","attr","append","axisLabelContainer","domain","extent","max","map","metricValue","xAxis","svg","axis","ticks","commonGraphProperties","axis_no_ticks","orient","yAxis","tickSize","createAxisLabelContainers","call","area","y0","y1","interpolate","line","datum","area_fill_color","line_color","area_stroke_width","on","handleMouseOverGraph","bind","x1","x2","y2","text","graph_legend_title","style","_this3","rectOverlay","querySelector","currentXCoordinate","mouse","currentGraphProps","timeValueOverlay","invert","overlayIndex","d0","d1","evalTime","currentData","currentTimeCoordinate","currentPrometheusGraphContainer","maxValueFromData","maxMetricValue","selectAll","remove","currentChart","circle_radius_metric","rectTextMetric","rect_text_width","rect_text_height","currentMetricValue","cpu_values","memory_values","median_total_characters","_this4","gl","utils","backOff","next","stop","ajax","url","dataType","done","statusText","resp","status","NO_CONTENT","fail","catch","_this5","metricValues","undefined","values","metric","Date","$statesContainer","hide","removeClass","show","P6M/","exports","statusCodes","OK"],"mappings":"AAAAA,cAAc,KAERC,KACA,SAAUC,EAAQC,EAAqBC,GAE7C,YACAC,QAAOC,eAAeH,EAAqB,cAAgBI,OAAO,GAC7C,IAAIC,GAAkDJ,EAAoB,OCL/FK,UAASC,iBAAiB,mBAAoB,QAASC,KAErD,MADAF,UAASG,oBAAoB,mBAAoBD,GAAQ,GAClD,GAAIH,GAAA,IACV,IDYGK,OACA,SAAUX,EAAQC,EAAqBC,GAE7C,cAC4B,SAASU,GASrC,QAASC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCATlD,GAAIC,GAAmCf,EAAoB,QAChGgB,EAA2ChB,EAAoBiB,EAAEF,GACjEG,EAAuDlB,EAAoB,QAC3EmB,EAA+DnB,EAAoBiB,EAAEC,GACrFE,EAAwDpB,EAAoB,QAC5EqB,EAAuCrB,EAAoB,QAEhFsB,GADoEtB,EAAoBiB,EAAEI,GAC3E,WAAc,QAASE,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAM9B,OAAOC,eAAesB,EAAQI,EAAWI,IAAKJ,IAAiB,MAAO,UAAUf,EAAaoB,EAAYC,GAAiJ,MAA9HD,IAAYV,EAAiBV,EAAYsB,UAAWF,GAAiBC,GAAaX,EAAiBV,EAAaqB,GAAqBrB,OEpB1hBuB,EAAsB,wBAEtBC,EAA4B,oBAG5BC,EAAatB,EAAAuB,EAAGC,KAAKC,OAAO,SAC5BC,EAAY1B,EAAAuB,EAAGC,KAAKC,OAAO,aAC3BE,EAAa3B,EAAAuB,EAAGK,SAAS,SAAAC,GAAA,MAAKA,GAAEL,OAAMM,KACtCC,EAAwB,IAExBC,EFkCgB,WEjCpB,QAAAA,KAAcrC,EAAAsC,KAAAD,EACZ,IAAME,GAAuBxC,EAAE0B,GACzBe,EAAaD,EAAqBE,KAAK,cAM7C,IALAH,KAAKI,QAAUH,EAAqBE,KAAK,YACzCH,KAAKK,gBAAkBJ,EAAqBE,KAAK,0BAEjD1C,EAAEL,UAAUkD,UAAU,cAElBJ,EAAY,CACdF,KAAKO,QAAWC,IAAK,GAAIC,MAAO,IAAKC,OAAQ,GAAIb,KAAM,KACvDG,KAAKW,sBAAyBH,IAAK,GAAIC,MAAO,EAAGC,OAAQ,GAAIb,KAAM,EACnE,IAAMe,GAAuBnD,EAAE2B,GAA2ByB,SAASC,QACnEhB,CACAE,MAAKe,cAAgBH,EACrBZ,KAAKgB,eAAiB,IACtBhB,KAAKc,MAAQF,EAAuBZ,KAAKO,OAAOV,KAAOG,KAAKO,OAAOE,MACnET,KAAKiB,OAASjB,KAAKgB,eAAiBhB,KAAKO,OAAOC,IAAMR,KAAKO,OAAOG,OAClEV,KAAKkB,sBAAwB,EAC7BlB,KAAKmB,iBACLnB,KAAKoB,WAELpB,MAAKqB,MAAQ,sBACbrB,KAAKsB,cFqUT,MA9RAjD,GAAa0B,IACXhB,IAAK,cACL7B,MAAO,WErCK,GAAAqE,GAAAvB,IACZhD,QAAOwE,KAAKxB,KAAKyB,yBAAyBC,QAAQ,SAAC3C,GACnCwC,EAAKE,wBAAwB1C,GACjCoB,KAAKzB,OAAS,GACtB6C,EAAKI,WAAW5C,QF4CpBA,IAAK,OACL7B,MAAO,WExCF,GAAA0E,GAAA5B,IACLA,MAAK6B,UAAUC,KAAK,SAACC,GACnB,GAAIC,IAAa,CACjBhF,QAAOwE,KAAKO,EAAgBE,SAASP,QAAQ,SAAC3C,GAC5C,GAAImD,SACQ,gBAARnD,GAAgC,kBAARA,IAC1BmD,EAAaH,EAAgBE,QAAQlD,GACE,IAAnC/B,OAAOwE,KAAKU,GAAYxD,SAC1BsD,GAAa,MAIdA,GAIHJ,EAAKO,cAAcJ,GACnBH,EAAKQ,gBAJLR,EAAKP,MAAQ,cACbO,EAAKN,oBFkDTvC,IAAK,aACL7B,MAAO,SE3CE6B,GACT,GAAMsD,GAAiBrC,KAAKyB,wBAAwB1C,GAE9CuD,EAAIvE,EAAAuB,EAAGC,KAAKgD,QACbC,OAAO,EAAGxC,KAAKc,QAEd2B,EAAI1E,EAAAuB,EAAGiD,MAAMG,SACdF,OAAOxC,KAAKiB,OAAQ,GAEzBoB,GAAeM,OAASL,EACxBD,EAAeO,OAASH,CAExB,IAAMI,GAA8BzD,EAA9B,eAAsEL,EAAtE,IAEA+D,EAAQ/E,EAAAuB,EAAGyD,OAAOF,GACrBG,KAAK,QAAShD,KAAKc,MAAQd,KAAKO,OAAOV,KAAOG,KAAKO,OAAOE,OAC1DuC,KAAK,SAAUhD,KAAKiB,OAASjB,KAAKO,OAAOG,OAASV,KAAKO,OAAOC,KAC9DyC,OAAO,KACLD,KAAK,YAJI,aAIsBhD,KAAKO,OAAOV,KAJlC,IAI0CG,KAAKO,OAAOC,IAJtD,KAMR0C,EAAqBnF,EAAAuB,EAAGyD,OAAOF,GAClCG,KAAK,QAAShD,KAAKe,eACnBiC,KAAK,SAAUhD,KAAKgB,gBACpBiC,OAAO,KACLD,KAAK,YAJiB,aAIShD,KAAKW,qBAAqBd,KAJnC,IAI2CG,KAAKW,qBAAqBH,IAJrE,IAM3B8B,GAAEa,OAAOpF,EAAAuB,EAAG8D,OAAOf,EAAelC,KAAM,SAAAP,GAAA,MAAKA,GAAEL,QAC/CkD,EAAEU,QAAQ,EAAGpF,EAAAuB,EAAG+D,IAAIhB,EAAelC,KAAKmD,IAAI,SAAAC,GAAA,MAAeA,GAAYrG,UAEvE,IAAMsG,GAAQzF,EAAAuB,EAAGmE,IAAIC,OAClBnB,MAAMD,GACNqB,MAAM3D,KAAK4D,sBAAsBC,eACjCC,OAAO,UAEJC,EAAQhG,EAAAuB,EAAGmE,IAAIC,OAClBnB,MAAME,GACNkB,MAAM3D,KAAK4D,sBAAsBC,eACjCG,UAAUhE,KAAKc,OACfgD,OAAO,OAEV9D,MAAKiE,0BAA0Bf,EAAoBnE,GAEnD+D,EAAMG,OAAO,KACVD,KAAK,QAAS,UACdA,KAAK,YAFR,eAEoChD,KAAKiB,OAFzC,KAGGiD,KAAKV,GAERV,EAAMG,OAAO,KACVD,KAAK,QAAS,UACdkB,KAAKH,EAER,IAAMI,GAAOpG,EAAAuB,EAAGmE,IAAIU,OACjB7B,EAAE,SAAA1C,GAAA,MAAK0C,GAAE1C,EAAEL,QACX6E,GAAGpE,KAAKiB,QACRoD,GAAG,SAAAzE,GAAA,MAAK6C,GAAE7C,EAAE1C,SACZoH,YAAY,UAETC,EAAOxG,EAAAuB,EAAGmE,IAAIc,OACnBjC,EAAE,SAAA1C,GAAA,MAAK0C,GAAE1C,EAAEL,QACXkD,EAAE,SAAA7C,GAAA,MAAK6C,GAAE7C,EAAE1C,QAEZ4F,GAAMG,OAAO,QACVuB,MAAMnC,EAAelC,MACrB6C,KAAK,IAAKmB,GACVnB,KAAK,QAAS,eACdA,KAAK,OAAQX,EAAeoC,iBAE/B3B,EAAMG,OAAO,QACVuB,MAAMnC,EAAelC,MACrB6C,KAAK,QAAS,eACdA,KAAK,SAAUX,EAAeqC,YAC9B1B,KAAK,OAAQ,QACbA,KAAK,eAAgBhD,KAAK4D,sBAAsBe,mBAChD3B,KAAK,IAAKuB,GAGbzB,EAAMG,OAAO,QACVD,KAAK,QAAS,4BACdA,KAAK,QAAShD,KAAKc,OACnBkC,KAAK,SAAUhD,KAAKiB,QACpB2D,GAAG,YAAa5E,KAAK6E,qBAAqBC,KAAK9E,KAAM6C,OFmBxD9D,IAAK,4BACL7B,MAAO,SEhBiBgG,EAAoBnE,GAC5C,GAAMsD,GAAiBrC,KAAKyB,wBAAwB1C,EAEpDmE,GAAmBD,OAAO,QACvBD,KAAK,QAAS,qBACdA,KAAK,SAAU,WACfA,KAAK,eAAgB,KACrBA,MACC+B,GAAI,GACJV,GAAIrE,KAAKgB,eAAiBhB,KAAKO,OAAOC,IACtCwE,GAAKhF,KAAKe,cAAgBf,KAAKO,OAAOE,MAAS,GAC/CwE,GAAIjF,KAAKgB,eAAiBhB,KAAKO,OAAOC,MAG1C0C,EAAmBD,OAAO,QACvBD,KAAK,QAAS,qBACdA,KAAK,SAAU,WACfA,KAAK,eAAgB,KACrBA,MACC+B,GAAI,GACJV,GAAI,EACJW,GAAI,GACJC,GAAIjF,KAAKgB,eAAiBhB,KAAKO,OAAOC,MAG1C0C,EAAmBD,OAAO,QACvBD,KAAK,QAAS,kBACdA,KAAK,IAAK,GACVA,KAAK,IAAK,IACVA,KAAK,QAAS,IACdA,KAAK,SAAU,KAElBE,EAAmBD,OAAO,QACvBD,KAAK,QAAS,mBACdA,KAAK,cAAe,UACpBA,KAAK,YAHR,kBAGuChD,KAAKgB,eAAiBhB,KAAKO,OAAOC,KAAO,EAHhF,iBAIG0E,KAAK7C,EAAe8C,oBAEvBjC,EAAmBD,OAAO,QACvBD,KAAK,QAAS,kBACdA,KAAK,IAAMhD,KAAKe,cAAgB,EAAKf,KAAKO,OAAOE,OACjDuC,KAAK,IAAKhD,KAAKgB,eAAiB,KAChCgC,KAAK,QAAS,IACdA,KAAK,SAAU,IAElBE,EAAmBD,OAAO,QACvBD,KAAK,QAAS,mBACdA,KAAK,IAAMhD,KAAKe,cAAgB,EAAKf,KAAKO,OAAOE,OACjDuC,KAAK,IAAKhD,KAAKgB,eAAiBhB,KAAKO,OAAOC,KAC5CwC,KAAK,KAAM,SACXkC,KAAK,QAKRhC,EAAmBD,OAAO,QACvBD,KAAK,IAAKhD,KAAKe,cAAgB,KAC/BiC,KAAK,IAAMhD,KAAKgB,eAAiB,EAAK,IACtCoE,MAAM,OAAQ/C,EAAeoC,iBAC7BzB,KAAK,QAAS,IACdA,KAAK,SAAU,IAElBE,EAAmBD,OAAO,QACvBD,KAAK,QAAS,qBACdA,KAAK,IAAKhD,KAAKe,cAAgB,KAC/BiC,KAAK,IAAMhD,KAAKgB,eAAiB,EAAK,IACtCkE,KAAK,WAERhC,EAAmBD,OAAO,QACvBD,KAAK,QAAS,qBACdA,KAAK,IAAKhD,KAAKe,cAAgB,KAC/BiC,KAAK,IAAMhD,KAAKgB,eAAiB,EAAK,OFpBzCjC,IAAK,uBACL7B,MAAO,SEsBY2F,GAA0B,GAAAwC,GAAArF,KACvCsF,EAAclI,SAASmI,cAAiB1C,EAA1B,8BACd2C,EAAqBzH,EAAAuB,EAAGmG,MAAMH,GAAa,EAEjDtI,QAAOwE,KAAKxB,KAAKyB,yBAAyBC,QAAQ,SAAC3C,GACjD,GAAM2G,GAAoBL,EAAK5D,wBAAwB1C,GACjD4G,EAAmBD,EAAkB/C,OAAOiD,OAAOJ,GACnDK,EAAenG,EAAWgG,EAAkBvF,KAAMwF,EAAkB,GACpEG,EAAKJ,EAAkBvF,KAAK0F,EAAe,GAC3CE,EAAKL,EAAkBvF,KAAK0F,GAC5BG,EAAWL,EAAmBG,EAAGvG,KAAOwG,EAAGxG,KAAOoG,EAClDM,EAAcD,EAAWD,EAAKD,EAC9BI,EAAwBR,EAAkB/C,OAAOsD,EAAY1G,MAC7D4G,EAAqC/G,EAArC,eAA6EL,EAA7E,IACAqH,EAAmBrI,EAAAuB,EAAG+D,IAAIqC,EAAkBvF,KAAKmD,IAAI,SAAAC,GAAA,MAAeA,GAAYrG,SAChFmJ,EAAiBX,EAAkB9C,OAAOwD,EAGhDrI,GAAAuB,EAAGgH,UAAaH,EAAhB,0BAAyEI,SACzExI,EAAAuB,EAAGgH,UAAaH,EAAhB,mBAAkEI,SAClExI,EAAAuB,EAAGgH,UAAaH,EAAhB,sBAAqEI,SACrExI,EAAAuB,EAAGgH,UAAaH,EAAhB,iBAAgEI,QAEhE,IAAMC,GAAezI,EAAAuB,EAAGyD,OAAOoD,GAAiCpD,OAAO,IACvEyD,GAAavD,OAAO,QACnBD,KAAK,QAAS,wBACdA,MACC+B,GAAImB,EACJ7B,GAAIqB,EAAkB9C,OAAO,GAC7BoC,GAAIkB,EACJjB,GAAIoB,IAGNG,EAAavD,OAAO,UACjBD,KAAK,QAAS,iBACdA,KAAK,OAAQ0C,EAAkBhB,YAC/B1B,KAAK,KAAMkD,GACXlD,KAAK,KAAM0C,EAAkB9C,OAAOqD,EAAY/I,QAChD8F,KAAK,IAAKqC,EAAKzB,sBAAsB6C,qBAGxC,IAAMC,GAAiBF,EAAavD,OAAO,KACxCD,KAAK,QAAS,oBACdA,KAAK,YAFe,IAEEkD,EAFF,KAE4BR,EAAkB9C,OAAOqD,EAAY/I,OAFjE,IAIvBwJ,GAAezD,OAAO,QACnBD,KAAK,QAAS,eACdA,KAAK,IAAKkD,EAAwB,IAClClD,KAAK,IAAKqD,GACVrD,KAAK,QAASqC,EAAKzB,sBAAsB+C,iBACzC3D,KAAK,SAAUqC,EAAKzB,sBAAsBgD,kBAE7CF,EAAezD,OAAO,QACnBD,KAAK,QAAS,eACdA,KAAK,IAAKkD,EAAwB,IAClClD,KAAK,IAAKqD,EAAiB,IAC3BnB,KAAK7F,EAAW4G,EAAY1G,OAE/BmH,EAAezD,OAAO,QACnBD,KAAK,QAAS,oBACdA,KAAK,IAAKkD,EAAwB,IAClClD,KAAK,IAAKqD,EAAiB,IAC3BnB,KAAKzF,EAAUwG,EAAY1G,MAE9B,IAAIsH,GAAqB9J,EAAA0B,EAAAN,EAAA,GAAqB8H,EAAY/I,MAExD2J,IADU,eAAR9H,EACF,IAEA,MAGFhB,EAAAuB,EAAGyD,OAAUoD,EAAb,uBACGjB,KAAK2B,QFrCV9H,IAAK,iBACL7B,MAAO,WEyCP8C,KAAKyB,yBACHqF,YACErC,gBAAiB,UACjBC,WAAY,UACZS,mBAAoB,oBACpBhF,QACAwC,UACAC,WAEFmE,eACEtC,gBAAiB,UACjBC,WAAY,UACZS,mBAAoB,oBACpBhF,QACAwC,UACAC,YAIJ5C,KAAK4D,uBACHe,kBAAmB,EACnBqC,wBAAyB,EACzBP,qBAAsB,EACtBE,gBAAiB,GACjBC,iBAAkB,GAClB/C,cAAe,MFpCjB9E,IAAK,UACL7B,MAAO,WEuCC,GAAA+J,GAAAjH,IAER,OAAOkH,IAAGC,MAAMC,QAAQ,SAACC,EAAMC,GAC7B7J,EAAE8J,MACAC,IA5UgB,eA6UhBC,SAAU,SAEXC,KAAK,SAACvH,EAAMwH,EAAYC,GACnBA,EAAKC,SAAW3J,EAAAoB,EAAYwI,YAC9Bb,EAAK/F,sBAAwB+F,EAAK/F,uBAAyB,EACvD+F,EAAK/F,sBATa,EAUpBmG,IAEAC,GACEO,OAAQD,EAAKC,OACb5F,QAAS9B,KAIbmH,GACEO,OAAQD,EAAKC,OACb5F,QAAS9B,MAGZ4H,KAAKT,KAETxF,KAAK,SAAC8F,GACL,MAAIA,GAAKC,SAAW3J,EAAAoB,EAAYwI,cAGzBF,EAAK3F,UAEb+F,MAAM,WACLf,EAAK5F,MAAQ,wBACb4F,EAAK3F,mBFpCPvC,IAAK,gBACL7B,MAAO,SEuCK6E,GAAiB,GAAAkG,GAAAjI,IAC7BhD,QAAOwE,KAAKO,EAAgBE,SAASP,QAAQ,SAAC3C,GAC5C,GAAY,eAARA,GAAgC,kBAARA,EAAyB,CACnD,GAAMmJ,GAAgBnG,EAAgBE,QAAQlD,GAAM,OAC/BoJ,KAAjBD,IACFD,EAAKxG,wBAAwB1C,GAAKoB,KAAO+H,EAAaE,OAAO9E,IAAI,SAAA+E,GAAA,OAC/D9I,KAAM,GAAI+I,MAAiB,IAAZD,EAAO,IACtBnL,MAAOmL,EAAO,aF5BtBtJ,IAAK,cACL7B,MAAO,WEmCP,GAAMqL,GAAmB9K,EA9XK,oBA+X9BA,GAjYmC,sBAiYD+K,OAClC/K,KAAKuC,KAAKqB,MAASkH,GAAkBE,YAAY,UACjDhL,EAjY8B,qBAiYDiL,WF9BxB3I,IEkCTjD,GAAA,MF9B6BoH,KAAKpH,EAAqBC,EAAoB,UAIrE4L,OACA,SAAU9L,EAAQ+L,GGnXxB,GAAMC,IACJf,WAAY,IACZgB,GAAI,IAGNjM,GAAO+L,QAAUC,KH6Xd","file":"monitoring.72f2975277289447b7a2.bundle.js","sourcesContent":["webpackJsonp([24],{\n\n/***/ \"IO1F\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__prometheus_graph__ = __webpack_require__(\"P//+\");\n\n\ndocument.addEventListener('DOMContentLoaded', function onLoad() {\n  document.removeEventListener('DOMContentLoaded', onLoad, false);\n  return new __WEBPACK_IMPORTED_MODULE_0__prometheus_graph__[\"a\" /* default */]();\n}, false);\n\n/***/ }),\n\n/***/ \"P//+\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3__ = __webpack_require__(\"+3IL\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_d3__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__lib_utils_http_status__ = __webpack_require__(\"P6M/\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__lib_utils_http_status___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__lib_utils_http_status__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__lib_utils_number_utils__ = __webpack_require__(\"ZYhW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flash__ = __webpack_require__(\"nYQN\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__flash__);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* eslint-disable no-new */\n/* global Flash */\n\n\n\n\n\n\nvar prometheusContainer = '.prometheus-container';\nvar prometheusParentGraphContainer = '.prometheus-graphs';\nvar prometheusGraphsContainer = '.prometheus-graph';\nvar prometheusStatesContainer = '.prometheus-state';\nvar metricsEndpoint = 'metrics.json';\nvar timeFormat = __WEBPACK_IMPORTED_MODULE_0_d3___default.a.time.format('%H:%M');\nvar dayFormat = __WEBPACK_IMPORTED_MODULE_0_d3___default.a.time.format('%b %e, %a');\nvar bisectDate = __WEBPACK_IMPORTED_MODULE_0_d3___default.a.bisector(function (d) {\n  return d.time;\n}).left;\nvar extraAddedWidthParent = 100;\n\nvar PrometheusGraph = function () {\n  function PrometheusGraph() {\n    _classCallCheck(this, PrometheusGraph);\n\n    var $prometheusContainer = $(prometheusContainer);\n    var hasMetrics = $prometheusContainer.data('has-metrics');\n    this.docLink = $prometheusContainer.data('doc-link');\n    this.integrationLink = $prometheusContainer.data('prometheus-integration');\n\n    $(document).ajaxError(function () {});\n\n    if (hasMetrics) {\n      this.margin = { top: 80, right: 180, bottom: 80, left: 100 };\n      this.marginLabelContainer = { top: 40, right: 0, bottom: 40, left: 0 };\n      var parentContainerWidth = $(prometheusGraphsContainer).parent().width() + extraAddedWidthParent;\n      this.originalWidth = parentContainerWidth;\n      this.originalHeight = 330;\n      this.width = parentContainerWidth - this.margin.left - this.margin.right;\n      this.height = this.originalHeight - this.margin.top - this.margin.bottom;\n      this.backOffRequestCounter = 0;\n      this.configureGraph();\n      this.init();\n    } else {\n      this.state = '.js-getting-started';\n      this.updateState();\n    }\n  }\n\n  _createClass(PrometheusGraph, [{\n    key: 'createGraph',\n    value: function createGraph() {\n      var _this = this;\n\n      Object.keys(this.graphSpecificProperties).forEach(function (key) {\n        var value = _this.graphSpecificProperties[key];\n        if (value.data.length > 0) {\n          _this.plotValues(key);\n        }\n      });\n    }\n  }, {\n    key: 'init',\n    value: function init() {\n      var _this2 = this;\n\n      this.getData().then(function (metricsResponse) {\n        var enoughData = true;\n        Object.keys(metricsResponse.metrics).forEach(function (key) {\n          var currentKey = void 0;\n          if (key === 'cpu_values' || key === 'memory_values') {\n            currentKey = metricsResponse.metrics[key];\n            if (Object.keys(currentKey).length === 0) {\n              enoughData = false;\n            }\n          }\n        });\n        if (!enoughData) {\n          _this2.state = '.js-loading';\n          _this2.updateState();\n        } else {\n          _this2.transformData(metricsResponse);\n          _this2.createGraph();\n        }\n      });\n    }\n  }, {\n    key: 'plotValues',\n    value: function plotValues(key) {\n      var graphSpecifics = this.graphSpecificProperties[key];\n\n      var x = __WEBPACK_IMPORTED_MODULE_0_d3___default.a.time.scale().range([0, this.width]);\n\n      var y = __WEBPACK_IMPORTED_MODULE_0_d3___default.a.scale.linear().range([this.height, 0]);\n\n      graphSpecifics.xScale = x;\n      graphSpecifics.yScale = y;\n\n      var prometheusGraphContainer = prometheusGraphsContainer + '[graph-type=' + key + ']';\n\n      var chart = __WEBPACK_IMPORTED_MODULE_0_d3___default.a.select(prometheusGraphContainer).attr('width', this.width + this.margin.left + this.margin.right).attr('height', this.height + this.margin.bottom + this.margin.top).append('g').attr('transform', 'translate(' + this.margin.left + ',' + this.margin.top + ')');\n\n      var axisLabelContainer = __WEBPACK_IMPORTED_MODULE_0_d3___default.a.select(prometheusGraphContainer).attr('width', this.originalWidth).attr('height', this.originalHeight).append('g').attr('transform', 'translate(' + this.marginLabelContainer.left + ',' + this.marginLabelContainer.top + ')');\n\n      x.domain(__WEBPACK_IMPORTED_MODULE_0_d3___default.a.extent(graphSpecifics.data, function (d) {\n        return d.time;\n      }));\n      y.domain([0, __WEBPACK_IMPORTED_MODULE_0_d3___default.a.max(graphSpecifics.data.map(function (metricValue) {\n        return metricValue.value;\n      }))]);\n\n      var xAxis = __WEBPACK_IMPORTED_MODULE_0_d3___default.a.svg.axis().scale(x).ticks(this.commonGraphProperties.axis_no_ticks).orient('bottom');\n\n      var yAxis = __WEBPACK_IMPORTED_MODULE_0_d3___default.a.svg.axis().scale(y).ticks(this.commonGraphProperties.axis_no_ticks).tickSize(-this.width).orient('left');\n\n      this.createAxisLabelContainers(axisLabelContainer, key);\n\n      chart.append('g').attr('class', 'x-axis').attr('transform', 'translate(0,' + this.height + ')').call(xAxis);\n\n      chart.append('g').attr('class', 'y-axis').call(yAxis);\n\n      var area = __WEBPACK_IMPORTED_MODULE_0_d3___default.a.svg.area().x(function (d) {\n        return x(d.time);\n      }).y0(this.height).y1(function (d) {\n        return y(d.value);\n      }).interpolate('linear');\n\n      var line = __WEBPACK_IMPORTED_MODULE_0_d3___default.a.svg.line().x(function (d) {\n        return x(d.time);\n      }).y(function (d) {\n        return y(d.value);\n      });\n\n      chart.append('path').datum(graphSpecifics.data).attr('d', area).attr('class', 'metric-area').attr('fill', graphSpecifics.area_fill_color);\n\n      chart.append('path').datum(graphSpecifics.data).attr('class', 'metric-line').attr('stroke', graphSpecifics.line_color).attr('fill', 'none').attr('stroke-width', this.commonGraphProperties.area_stroke_width).attr('d', line);\n\n      // Overlay area for the mouseover events\n      chart.append('rect').attr('class', 'prometheus-graph-overlay').attr('width', this.width).attr('height', this.height).on('mousemove', this.handleMouseOverGraph.bind(this, prometheusGraphContainer));\n    }\n\n    // The legends from the metric\n\n  }, {\n    key: 'createAxisLabelContainers',\n    value: function createAxisLabelContainers(axisLabelContainer, key) {\n      var graphSpecifics = this.graphSpecificProperties[key];\n\n      axisLabelContainer.append('line').attr('class', 'label-x-axis-line').attr('stroke', '#000000').attr('stroke-width', '1').attr({\n        x1: 10,\n        y1: this.originalHeight - this.margin.top,\n        x2: this.originalWidth - this.margin.right + 10,\n        y2: this.originalHeight - this.margin.top\n      });\n\n      axisLabelContainer.append('line').attr('class', 'label-y-axis-line').attr('stroke', '#000000').attr('stroke-width', '1').attr({\n        x1: 10,\n        y1: 0,\n        x2: 10,\n        y2: this.originalHeight - this.margin.top\n      });\n\n      axisLabelContainer.append('rect').attr('class', 'rect-axis-text').attr('x', 0).attr('y', 50).attr('width', 30).attr('height', 150);\n\n      axisLabelContainer.append('text').attr('class', 'label-axis-text').attr('text-anchor', 'middle').attr('transform', 'translate(15, ' + (this.originalHeight - this.margin.top) / 2 + ') rotate(-90)').text(graphSpecifics.graph_legend_title);\n\n      axisLabelContainer.append('rect').attr('class', 'rect-axis-text').attr('x', this.originalWidth / 2 - this.margin.right).attr('y', this.originalHeight - 100).attr('width', 30).attr('height', 80);\n\n      axisLabelContainer.append('text').attr('class', 'label-axis-text').attr('x', this.originalWidth / 2 - this.margin.right).attr('y', this.originalHeight - this.margin.top).attr('dy', '.35em').text('Time');\n\n      // Legends\n\n      // Metric Usage\n      axisLabelContainer.append('rect').attr('x', this.originalWidth - 170).attr('y', this.originalHeight / 2 - 60).style('fill', graphSpecifics.area_fill_color).attr('width', 20).attr('height', 35);\n\n      axisLabelContainer.append('text').attr('class', 'text-metric-title').attr('x', this.originalWidth - 140).attr('y', this.originalHeight / 2 - 50).text('Average');\n\n      axisLabelContainer.append('text').attr('class', 'text-metric-usage').attr('x', this.originalWidth - 140).attr('y', this.originalHeight / 2 - 25);\n    }\n  }, {\n    key: 'handleMouseOverGraph',\n    value: function handleMouseOverGraph(prometheusGraphContainer) {\n      var _this3 = this;\n\n      var rectOverlay = document.querySelector(prometheusGraphContainer + ' .prometheus-graph-overlay');\n      var currentXCoordinate = __WEBPACK_IMPORTED_MODULE_0_d3___default.a.mouse(rectOverlay)[0];\n\n      Object.keys(this.graphSpecificProperties).forEach(function (key) {\n        var currentGraphProps = _this3.graphSpecificProperties[key];\n        var timeValueOverlay = currentGraphProps.xScale.invert(currentXCoordinate);\n        var overlayIndex = bisectDate(currentGraphProps.data, timeValueOverlay, 1);\n        var d0 = currentGraphProps.data[overlayIndex - 1];\n        var d1 = currentGraphProps.data[overlayIndex];\n        var evalTime = timeValueOverlay - d0.time > d1.time - timeValueOverlay;\n        var currentData = evalTime ? d1 : d0;\n        var currentTimeCoordinate = currentGraphProps.xScale(currentData.time);\n        var currentPrometheusGraphContainer = prometheusGraphsContainer + '[graph-type=' + key + ']';\n        var maxValueFromData = __WEBPACK_IMPORTED_MODULE_0_d3___default.a.max(currentGraphProps.data.map(function (metricValue) {\n          return metricValue.value;\n        }));\n        var maxMetricValue = currentGraphProps.yScale(maxValueFromData);\n\n        // Clear up all the pieces of the flag\n        __WEBPACK_IMPORTED_MODULE_0_d3___default.a.selectAll(currentPrometheusGraphContainer + ' .selected-metric-line').remove();\n        __WEBPACK_IMPORTED_MODULE_0_d3___default.a.selectAll(currentPrometheusGraphContainer + ' .circle-metric').remove();\n        __WEBPACK_IMPORTED_MODULE_0_d3___default.a.selectAll(currentPrometheusGraphContainer + ' .rect-text-metric').remove();\n        __WEBPACK_IMPORTED_MODULE_0_d3___default.a.selectAll(currentPrometheusGraphContainer + ' .text-metric').remove();\n\n        var currentChart = __WEBPACK_IMPORTED_MODULE_0_d3___default.a.select(currentPrometheusGraphContainer).select('g');\n        currentChart.append('line').attr('class', 'selected-metric-line').attr({\n          x1: currentTimeCoordinate,\n          y1: currentGraphProps.yScale(0),\n          x2: currentTimeCoordinate,\n          y2: maxMetricValue\n        });\n\n        currentChart.append('circle').attr('class', 'circle-metric').attr('fill', currentGraphProps.line_color).attr('cx', currentTimeCoordinate).attr('cy', currentGraphProps.yScale(currentData.value)).attr('r', _this3.commonGraphProperties.circle_radius_metric);\n\n        // The little box with text\n        var rectTextMetric = currentChart.append('g').attr('class', 'rect-text-metric').attr('translate', '(' + currentTimeCoordinate + ', ' + currentGraphProps.yScale(currentData.value) + ')');\n\n        rectTextMetric.append('rect').attr('class', 'rect-metric').attr('x', currentTimeCoordinate + 10).attr('y', maxMetricValue).attr('width', _this3.commonGraphProperties.rect_text_width).attr('height', _this3.commonGraphProperties.rect_text_height);\n\n        rectTextMetric.append('text').attr('class', 'text-metric').attr('x', currentTimeCoordinate + 35).attr('y', maxMetricValue + 35).text(timeFormat(currentData.time));\n\n        rectTextMetric.append('text').attr('class', 'text-metric-date').attr('x', currentTimeCoordinate + 15).attr('y', maxMetricValue + 15).text(dayFormat(currentData.time));\n\n        var currentMetricValue = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__lib_utils_number_utils__[\"a\" /* formatRelevantDigits */])(currentData.value);\n        if (key === 'cpu_values') {\n          currentMetricValue = currentMetricValue + '%';\n        } else {\n          currentMetricValue = currentMetricValue + ' MB';\n        }\n\n        __WEBPACK_IMPORTED_MODULE_0_d3___default.a.select(currentPrometheusGraphContainer + ' .text-metric-usage').text(currentMetricValue);\n      });\n    }\n  }, {\n    key: 'configureGraph',\n    value: function configureGraph() {\n      this.graphSpecificProperties = {\n        cpu_values: {\n          area_fill_color: '#edf3fc',\n          line_color: '#5b99f7',\n          graph_legend_title: 'CPU Usage (Cores)',\n          data: [],\n          xScale: {},\n          yScale: {}\n        },\n        memory_values: {\n          area_fill_color: '#fca326',\n          line_color: '#fc6d26',\n          graph_legend_title: 'Memory Usage (MB)',\n          data: [],\n          xScale: {},\n          yScale: {}\n        }\n      };\n\n      this.commonGraphProperties = {\n        area_stroke_width: 2,\n        median_total_characters: 8,\n        circle_radius_metric: 5,\n        rect_text_width: 90,\n        rect_text_height: 40,\n        axis_no_ticks: 3\n      };\n    }\n  }, {\n    key: 'getData',\n    value: function getData() {\n      var _this4 = this;\n\n      var maxNumberOfRequests = 3;\n      return gl.utils.backOff(function (next, stop) {\n        $.ajax({\n          url: metricsEndpoint,\n          dataType: 'json'\n        }).done(function (data, statusText, resp) {\n          if (resp.status === __WEBPACK_IMPORTED_MODULE_1__lib_utils_http_status___default.a.NO_CONTENT) {\n            _this4.backOffRequestCounter = _this4.backOffRequestCounter += 1;\n            if (_this4.backOffRequestCounter < maxNumberOfRequests) {\n              next();\n            } else {\n              stop({\n                status: resp.status,\n                metrics: data\n              });\n            }\n          } else {\n            stop({\n              status: resp.status,\n              metrics: data\n            });\n          }\n        }).fail(stop);\n      }).then(function (resp) {\n        if (resp.status === __WEBPACK_IMPORTED_MODULE_1__lib_utils_http_status___default.a.NO_CONTENT) {\n          return {};\n        }\n        return resp.metrics;\n      }).catch(function () {\n        _this4.state = '.js-unable-to-connect';\n        _this4.updateState();\n      });\n    }\n  }, {\n    key: 'transformData',\n    value: function transformData(metricsResponse) {\n      var _this5 = this;\n\n      Object.keys(metricsResponse.metrics).forEach(function (key) {\n        if (key === 'cpu_values' || key === 'memory_values') {\n          var metricValues = metricsResponse.metrics[key][0];\n          if (metricValues !== undefined) {\n            _this5.graphSpecificProperties[key].data = metricValues.values.map(function (metric) {\n              return {\n                time: new Date(metric[0] * 1000),\n                value: metric[1]\n              };\n            });\n          }\n        }\n      });\n    }\n  }, {\n    key: 'updateState',\n    value: function updateState() {\n      var $statesContainer = $(prometheusStatesContainer);\n      $(prometheusParentGraphContainer).hide();\n      $('' + this.state, $statesContainer).removeClass('hidden');\n      $(prometheusStatesContainer).show();\n    }\n  }]);\n\n  return PrometheusGraph;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PrometheusGraph);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(\"lwLq\")))\n\n/***/ }),\n\n/***/ \"P6M/\":\n/***/ (function(module, exports) {\n\n/**\n * exports HTTP status codes\n */\n\nvar statusCodes = {\n  NO_CONTENT: 204,\n  OK: 200\n};\n\nmodule.exports = statusCodes;\n\n/***/ })\n\n},[\"IO1F\"]);\n\n\n// WEBPACK FOOTER //\n// monitoring.72f2975277289447b7a2.bundle.js","import PrometheusGraph from './prometheus_graph';\n\ndocument.addEventListener('DOMContentLoaded', function onLoad() {\n  document.removeEventListener('DOMContentLoaded', onLoad, false);\n  return new PrometheusGraph();\n}, false);\n\n\n\n// WEBPACK FOOTER //\n// ./monitoring/monitoring_bundle.js","/* eslint-disable no-new */\n/* global Flash */\n\nimport d3 from 'd3';\nimport statusCodes from '~/lib/utils/http_status';\nimport { formatRelevantDigits } from '~/lib/utils/number_utils';\nimport '../flash';\n\nconst prometheusContainer = '.prometheus-container';\nconst prometheusParentGraphContainer = '.prometheus-graphs';\nconst prometheusGraphsContainer = '.prometheus-graph';\nconst prometheusStatesContainer = '.prometheus-state';\nconst metricsEndpoint = 'metrics.json';\nconst timeFormat = d3.time.format('%H:%M');\nconst dayFormat = d3.time.format('%b %e, %a');\nconst bisectDate = d3.bisector(d => d.time).left;\nconst extraAddedWidthParent = 100;\n\nclass PrometheusGraph {\n  constructor() {\n    const $prometheusContainer = $(prometheusContainer);\n    const hasMetrics = $prometheusContainer.data('has-metrics');\n    this.docLink = $prometheusContainer.data('doc-link');\n    this.integrationLink = $prometheusContainer.data('prometheus-integration');\n\n    $(document).ajaxError(() => {});\n\n    if (hasMetrics) {\n      this.margin = { top: 80, right: 180, bottom: 80, left: 100 };\n      this.marginLabelContainer = { top: 40, right: 0, bottom: 40, left: 0 };\n      const parentContainerWidth = $(prometheusGraphsContainer).parent().width() +\n      extraAddedWidthParent;\n      this.originalWidth = parentContainerWidth;\n      this.originalHeight = 330;\n      this.width = parentContainerWidth - this.margin.left - this.margin.right;\n      this.height = this.originalHeight - this.margin.top - this.margin.bottom;\n      this.backOffRequestCounter = 0;\n      this.configureGraph();\n      this.init();\n    } else {\n      this.state = '.js-getting-started';\n      this.updateState();\n    }\n  }\n\n  createGraph() {\n    Object.keys(this.graphSpecificProperties).forEach((key) => {\n      const value = this.graphSpecificProperties[key];\n      if (value.data.length > 0) {\n        this.plotValues(key);\n      }\n    });\n  }\n\n  init() {\n    this.getData().then((metricsResponse) => {\n      let enoughData = true;\n      Object.keys(metricsResponse.metrics).forEach((key) => {\n        let currentKey;\n        if (key === 'cpu_values' || key === 'memory_values') {\n          currentKey = metricsResponse.metrics[key];\n          if (Object.keys(currentKey).length === 0) {\n            enoughData = false;\n          }\n        }\n      });\n      if (!enoughData) {\n        this.state = '.js-loading';\n        this.updateState();\n      } else {\n        this.transformData(metricsResponse);\n        this.createGraph();\n      }\n    });\n  }\n\n  plotValues(key) {\n    const graphSpecifics = this.graphSpecificProperties[key];\n\n    const x = d3.time.scale()\n        .range([0, this.width]);\n\n    const y = d3.scale.linear()\n        .range([this.height, 0]);\n\n    graphSpecifics.xScale = x;\n    graphSpecifics.yScale = y;\n\n    const prometheusGraphContainer = `${prometheusGraphsContainer}[graph-type=${key}]`;\n\n    const chart = d3.select(prometheusGraphContainer)\n      .attr('width', this.width + this.margin.left + this.margin.right)\n      .attr('height', this.height + this.margin.bottom + this.margin.top)\n      .append('g')\n        .attr('transform', `translate(${this.margin.left},${this.margin.top})`);\n\n    const axisLabelContainer = d3.select(prometheusGraphContainer)\n      .attr('width', this.originalWidth)\n      .attr('height', this.originalHeight)\n      .append('g')\n        .attr('transform', `translate(${this.marginLabelContainer.left},${this.marginLabelContainer.top})`);\n\n    x.domain(d3.extent(graphSpecifics.data, d => d.time));\n    y.domain([0, d3.max(graphSpecifics.data.map(metricValue => metricValue.value))]);\n\n    const xAxis = d3.svg.axis()\n      .scale(x)\n      .ticks(this.commonGraphProperties.axis_no_ticks)\n      .orient('bottom');\n\n    const yAxis = d3.svg.axis()\n      .scale(y)\n      .ticks(this.commonGraphProperties.axis_no_ticks)\n      .tickSize(-this.width)\n      .orient('left');\n\n    this.createAxisLabelContainers(axisLabelContainer, key);\n\n    chart.append('g')\n      .attr('class', 'x-axis')\n      .attr('transform', `translate(0,${this.height})`)\n      .call(xAxis);\n\n    chart.append('g')\n      .attr('class', 'y-axis')\n      .call(yAxis);\n\n    const area = d3.svg.area()\n      .x(d => x(d.time))\n      .y0(this.height)\n      .y1(d => y(d.value))\n      .interpolate('linear');\n\n    const line = d3.svg.line()\n    .x(d => x(d.time))\n    .y(d => y(d.value));\n\n    chart.append('path')\n      .datum(graphSpecifics.data)\n      .attr('d', area)\n      .attr('class', 'metric-area')\n      .attr('fill', graphSpecifics.area_fill_color);\n\n    chart.append('path')\n      .datum(graphSpecifics.data)\n      .attr('class', 'metric-line')\n      .attr('stroke', graphSpecifics.line_color)\n      .attr('fill', 'none')\n      .attr('stroke-width', this.commonGraphProperties.area_stroke_width)\n      .attr('d', line);\n\n    // Overlay area for the mouseover events\n    chart.append('rect')\n      .attr('class', 'prometheus-graph-overlay')\n      .attr('width', this.width)\n      .attr('height', this.height)\n      .on('mousemove', this.handleMouseOverGraph.bind(this, prometheusGraphContainer));\n  }\n\n  // The legends from the metric\n  createAxisLabelContainers(axisLabelContainer, key) {\n    const graphSpecifics = this.graphSpecificProperties[key];\n\n    axisLabelContainer.append('line')\n      .attr('class', 'label-x-axis-line')\n      .attr('stroke', '#000000')\n      .attr('stroke-width', '1')\n      .attr({\n        x1: 10,\n        y1: this.originalHeight - this.margin.top,\n        x2: (this.originalWidth - this.margin.right) + 10,\n        y2: this.originalHeight - this.margin.top,\n      });\n\n    axisLabelContainer.append('line')\n      .attr('class', 'label-y-axis-line')\n      .attr('stroke', '#000000')\n      .attr('stroke-width', '1')\n      .attr({\n        x1: 10,\n        y1: 0,\n        x2: 10,\n        y2: this.originalHeight - this.margin.top,\n      });\n\n    axisLabelContainer.append('rect')\n      .attr('class', 'rect-axis-text')\n      .attr('x', 0)\n      .attr('y', 50)\n      .attr('width', 30)\n      .attr('height', 150);\n\n    axisLabelContainer.append('text')\n      .attr('class', 'label-axis-text')\n      .attr('text-anchor', 'middle')\n      .attr('transform', `translate(15, ${(this.originalHeight - this.margin.top) / 2}) rotate(-90)`)\n      .text(graphSpecifics.graph_legend_title);\n\n    axisLabelContainer.append('rect')\n      .attr('class', 'rect-axis-text')\n      .attr('x', (this.originalWidth / 2) - this.margin.right)\n      .attr('y', this.originalHeight - 100)\n      .attr('width', 30)\n      .attr('height', 80);\n\n    axisLabelContainer.append('text')\n      .attr('class', 'label-axis-text')\n      .attr('x', (this.originalWidth / 2) - this.margin.right)\n      .attr('y', this.originalHeight - this.margin.top)\n      .attr('dy', '.35em')\n      .text('Time');\n\n    // Legends\n\n    // Metric Usage\n    axisLabelContainer.append('rect')\n      .attr('x', this.originalWidth - 170)\n      .attr('y', (this.originalHeight / 2) - 60)\n      .style('fill', graphSpecifics.area_fill_color)\n      .attr('width', 20)\n      .attr('height', 35);\n\n    axisLabelContainer.append('text')\n      .attr('class', 'text-metric-title')\n      .attr('x', this.originalWidth - 140)\n      .attr('y', (this.originalHeight / 2) - 50)\n      .text('Average');\n\n    axisLabelContainer.append('text')\n      .attr('class', 'text-metric-usage')\n      .attr('x', this.originalWidth - 140)\n      .attr('y', (this.originalHeight / 2) - 25);\n  }\n\n  handleMouseOverGraph(prometheusGraphContainer) {\n    const rectOverlay = document.querySelector(`${prometheusGraphContainer} .prometheus-graph-overlay`);\n    const currentXCoordinate = d3.mouse(rectOverlay)[0];\n\n    Object.keys(this.graphSpecificProperties).forEach((key) => {\n      const currentGraphProps = this.graphSpecificProperties[key];\n      const timeValueOverlay = currentGraphProps.xScale.invert(currentXCoordinate);\n      const overlayIndex = bisectDate(currentGraphProps.data, timeValueOverlay, 1);\n      const d0 = currentGraphProps.data[overlayIndex - 1];\n      const d1 = currentGraphProps.data[overlayIndex];\n      const evalTime = timeValueOverlay - d0.time > d1.time - timeValueOverlay;\n      const currentData = evalTime ? d1 : d0;\n      const currentTimeCoordinate = currentGraphProps.xScale(currentData.time);\n      const currentPrometheusGraphContainer = `${prometheusGraphsContainer}[graph-type=${key}]`;\n      const maxValueFromData = d3.max(currentGraphProps.data.map(metricValue => metricValue.value));\n      const maxMetricValue = currentGraphProps.yScale(maxValueFromData);\n\n      // Clear up all the pieces of the flag\n      d3.selectAll(`${currentPrometheusGraphContainer} .selected-metric-line`).remove();\n      d3.selectAll(`${currentPrometheusGraphContainer} .circle-metric`).remove();\n      d3.selectAll(`${currentPrometheusGraphContainer} .rect-text-metric`).remove();\n      d3.selectAll(`${currentPrometheusGraphContainer} .text-metric`).remove();\n\n      const currentChart = d3.select(currentPrometheusGraphContainer).select('g');\n      currentChart.append('line')\n      .attr('class', 'selected-metric-line')\n      .attr({\n        x1: currentTimeCoordinate,\n        y1: currentGraphProps.yScale(0),\n        x2: currentTimeCoordinate,\n        y2: maxMetricValue,\n      });\n\n      currentChart.append('circle')\n        .attr('class', 'circle-metric')\n        .attr('fill', currentGraphProps.line_color)\n        .attr('cx', currentTimeCoordinate)\n        .attr('cy', currentGraphProps.yScale(currentData.value))\n        .attr('r', this.commonGraphProperties.circle_radius_metric);\n\n      // The little box with text\n      const rectTextMetric = currentChart.append('g')\n        .attr('class', 'rect-text-metric')\n        .attr('translate', `(${currentTimeCoordinate}, ${currentGraphProps.yScale(currentData.value)})`);\n\n      rectTextMetric.append('rect')\n        .attr('class', 'rect-metric')\n        .attr('x', currentTimeCoordinate + 10)\n        .attr('y', maxMetricValue)\n        .attr('width', this.commonGraphProperties.rect_text_width)\n        .attr('height', this.commonGraphProperties.rect_text_height);\n\n      rectTextMetric.append('text')\n        .attr('class', 'text-metric')\n        .attr('x', currentTimeCoordinate + 35)\n        .attr('y', maxMetricValue + 35)\n        .text(timeFormat(currentData.time));\n\n      rectTextMetric.append('text')\n        .attr('class', 'text-metric-date')\n        .attr('x', currentTimeCoordinate + 15)\n        .attr('y', maxMetricValue + 15)\n        .text(dayFormat(currentData.time));\n\n      let currentMetricValue = formatRelevantDigits(currentData.value);\n      if (key === 'cpu_values') {\n        currentMetricValue = `${currentMetricValue}%`;\n      } else {\n        currentMetricValue = `${currentMetricValue} MB`;\n      }\n\n      d3.select(`${currentPrometheusGraphContainer} .text-metric-usage`)\n        .text(currentMetricValue);\n    });\n  }\n\n  configureGraph() {\n    this.graphSpecificProperties = {\n      cpu_values: {\n        area_fill_color: '#edf3fc',\n        line_color: '#5b99f7',\n        graph_legend_title: 'CPU Usage (Cores)',\n        data: [],\n        xScale: {},\n        yScale: {},\n      },\n      memory_values: {\n        area_fill_color: '#fca326',\n        line_color: '#fc6d26',\n        graph_legend_title: 'Memory Usage (MB)',\n        data: [],\n        xScale: {},\n        yScale: {},\n      },\n    };\n\n    this.commonGraphProperties = {\n      area_stroke_width: 2,\n      median_total_characters: 8,\n      circle_radius_metric: 5,\n      rect_text_width: 90,\n      rect_text_height: 40,\n      axis_no_ticks: 3,\n    };\n  }\n\n  getData() {\n    const maxNumberOfRequests = 3;\n    return gl.utils.backOff((next, stop) => {\n      $.ajax({\n        url: metricsEndpoint,\n        dataType: 'json',\n      })\n      .done((data, statusText, resp) => {\n        if (resp.status === statusCodes.NO_CONTENT) {\n          this.backOffRequestCounter = this.backOffRequestCounter += 1;\n          if (this.backOffRequestCounter < maxNumberOfRequests) {\n            next();\n          } else {\n            stop({\n              status: resp.status,\n              metrics: data,\n            });\n          }\n        } else {\n          stop({\n            status: resp.status,\n            metrics: data,\n          });\n        }\n      }).fail(stop);\n    })\n    .then((resp) => {\n      if (resp.status === statusCodes.NO_CONTENT) {\n        return {};\n      }\n      return resp.metrics;\n    })\n    .catch(() => {\n      this.state = '.js-unable-to-connect';\n      this.updateState();\n    });\n  }\n\n  transformData(metricsResponse) {\n    Object.keys(metricsResponse.metrics).forEach((key) => {\n      if (key === 'cpu_values' || key === 'memory_values') {\n        const metricValues = (metricsResponse.metrics[key])[0];\n        if (metricValues !== undefined) {\n          this.graphSpecificProperties[key].data = metricValues.values.map(metric => ({\n            time: new Date(metric[0] * 1000),\n            value: metric[1],\n          }));\n        }\n      }\n    });\n  }\n\n  updateState() {\n    const $statesContainer = $(prometheusStatesContainer);\n    $(prometheusParentGraphContainer).hide();\n    $(`${this.state}`, $statesContainer).removeClass('hidden');\n    $(prometheusStatesContainer).show();\n  }\n}\n\nexport default PrometheusGraph;\n\n\n\n// WEBPACK FOOTER //\n// ./monitoring/prometheus_graph.js","/**\n * exports HTTP status codes\n */\n\nconst statusCodes = {\n  NO_CONTENT: 204,\n  OK: 200,\n};\n\nmodule.exports = statusCodes;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/utils/http_status.js"],"sourceRoot":""}