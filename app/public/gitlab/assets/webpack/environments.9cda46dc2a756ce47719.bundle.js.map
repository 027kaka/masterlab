{"version":3,"sources":["webpack:///environments.9cda46dc2a756ce47719.bundle.js","webpack:///./environments/components/environment_item.js?dea3","webpack:///./environments/components/environment_external_url.js?0214","webpack:///./environments/components/environment_rollback.js?15a5","webpack:////var/cache/omnibus/src/gitlab-rails/app/views/shared/icons/_icon_play.svg?43c5**","webpack:///./environments/components/environment_monitoring.js?3cf3","webpack:///./environments/components/environment_terminal_button.js?43f8","webpack:///./environments/components/environment_actions.js?47c0","webpack:///./environments/event_hub.js?49d4","webpack:////var/cache/omnibus/src/gitlab-rails/app/views/shared/icons/_icon_terminal.svg?eef3","webpack:///./environments/environments_bundle.js","webpack:////var/cache/omnibus/src/gitlab-rails/app/views/shared/icons/_icon_commit.svg?b288**","webpack:///./environments/components/environments_table.js?8cd6","webpack:///./environments/components/environment_stop.js?9175","webpack:///./environments/services/environments_service.js?a463","webpack:///./environments/components/environment.js","webpack:///./environments/stores/environments_store.js?c3e8"],"names":["webpackJsonp","3qMg","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_timeago_js__","__WEBPACK_IMPORTED_MODULE_0_timeago_js___default","n","__WEBPACK_IMPORTED_MODULE_1__lib_utils_text_utility__","__WEBPACK_IMPORTED_MODULE_2__environment_actions__","__WEBPACK_IMPORTED_MODULE_3__environment_external_url__","__WEBPACK_IMPORTED_MODULE_4__environment_stop__","__WEBPACK_IMPORTED_MODULE_5__environment_rollback__","__WEBPACK_IMPORTED_MODULE_6__environment_terminal_button__","__WEBPACK_IMPORTED_MODULE_7__environment_monitoring__","__WEBPACK_IMPORTED_MODULE_8__vue_shared_components_commit__","__WEBPACK_IMPORTED_MODULE_9__event_hub__","timeagoInstance","a","components","commit-component","actions-component","external-url-component","stop-component","rollback-component","terminal-button-component","monitoring-button-component","props","model","type","Object","required","default","canCreateDeployment","Boolean","canReadEnvironment","service","computed","hasLastDeploymentKey","this","last_deployment","$options","isObjectEmpty","hasManualActions","manual_actions","length","hasStopAction","canRetry","deployable","canShowDate","undefined","createdDate","created_at","format","manualActions","map","action","name","gl","text","humanize","play_path","playable","userImageAltDescription","user","username","commitTag","tag","commitRef","ref","commitUrl","commit","commit_path","commitShortSha","short_id","commitTitle","title","commitAuthor","author","retryUrl","retry_path","isLastDeployment","buildName","id","deploymentInternalId","iid","deploymentHasUser","deploymentUser","shouldRenderBuildName","isFolder","buildPath","build_path","externalURL","external_url","shouldRenderDeploymentID","environmentPath","environment_path","monitoringUrl","metrics_path","folderUrl","window","location","pathname","folderName","object","key","hasOwnProperty","call","methods","onClickFolder","$emit","template","AhTQ","externalUrl","String","FaWK","$","__WEBPACK_IMPORTED_MODULE_0__event_hub__","data","isLoading","onClick","_this","$el","tooltip","postAction","then","catch","Flash","LIwm","exports","PPOU","Q/iC","__WEBPACK_IMPORTED_MODULE_0_icons_icon_terminal_svg__","__WEBPACK_IMPORTED_MODULE_0_icons_icon_terminal_svg___default","terminalPath","terminalIconSvg","R8Dz","__WEBPACK_IMPORTED_MODULE_0_icons_icon_play_svg__","__WEBPACK_IMPORTED_MODULE_0_icons_icon_play_svg___default","__WEBPACK_IMPORTED_MODULE_1__event_hub__","actions","Array","playIconSvg","onClickAction","endpoint","$refs","isActionDisabled","SdTk","__WEBPACK_IMPORTED_MODULE_0_vue__","WEra","XJ/8","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__components_environment__","EnvironmentsListApp","$destroy","el","document","querySelector","ZmZM","jNb8","__WEBPACK_IMPORTED_MODULE_0__environment_item__","environment-item","environments","isLoadingFolderContent","kXVd","stopUrl","confirm","pGP2","_classCallCheck","instance","Constructor","TypeError","__WEBPACK_IMPORTED_MODULE_1_vue_resource__","__WEBPACK_IMPORTED_MODULE_1_vue_resource___default","_createClass","defineProperties","target","i","descriptor","enumerable","configurable","writable","protoProps","staticProps","prototype","use","EnvironmentsService","resource","folderResults","scope","page","get","http","post","emulateJSON","vm9i","__WEBPACK_IMPORTED_MODULE_1__services_environments_service__","__WEBPACK_IMPORTED_MODULE_2__environments_table__","__WEBPACK_IMPORTED_MODULE_3__stores_environments_store__","__WEBPACK_IMPORTED_MODULE_4__vue_shared_components_table_pagination__","__WEBPACK_IMPORTED_MODULE_5__lib_utils_common_utils__","__WEBPACK_IMPORTED_MODULE_6__event_hub__","component","environment-table","table-pagination","environmentsData","dataset","store","state","visibility","cssContainerClass","cssClass","environmentsDataEndpoint","canCreateEnvironment","projectEnvironmentsPath","projectStoppedEnvironmentsPath","newEnvironmentPath","helpPagePath","paginationInformation","pageNumber","utils","getParameterByName","canReadEnvironmentParsed","convertPermissionToBoolean","canCreateDeploymentParsed","canCreateEnvironmentParsed","created","fetchEnvironments","$on","toggleFolder","beforeDestroyed","$off","folder","isOpen","fetchChildEnvironments","changePage","param","setParamInURL","visitUrl","resp","headers","body","json","response","storeAvailableCount","available_count","storeStoppedCount","stopped_count","storeEnvironments","setPagination","_this2","getFolderContent","setfolderContent","w+iT","__WEBPACK_IMPORTED_MODULE_0__lib_utils_common_utils__","EnvironmentsStore","stoppedCounter","availableCounter","arguments","filteredEnvironments","env","filtered","size","assign","children","latest","pagination","normalizedHeaders","normalizeHeaders","parseIntPagination","count","updateFolder","updatedEnvironments","updated","isChildren","prop","newValue","updateEnv"],"mappings":"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","file":"environments.9cda46dc2a756ce47719.bundle.js","sourcesContent":["webpackJsonp([8],{\n\n/***/ \"3qMg\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_timeago_js__ = __webpack_require__(\"j4Jp\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_timeago_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_timeago_js__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__lib_utils_text_utility__ = __webpack_require__(\"A+3H\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__lib_utils_text_utility___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__lib_utils_text_utility__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__environment_actions__ = __webpack_require__(\"R8Dz\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__environment_external_url__ = __webpack_require__(\"AhTQ\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__environment_stop__ = __webpack_require__(\"kXVd\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__environment_rollback__ = __webpack_require__(\"FaWK\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__environment_terminal_button__ = __webpack_require__(\"Q/iC\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__environment_monitoring__ = __webpack_require__(\"PPOU\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__vue_shared_components_commit__ = __webpack_require__(\"zp3R\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__event_hub__ = __webpack_require__(\"SdTk\");\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Envrionment Item Component\n *\n * Renders a table row for each environment.\n */\nvar timeagoInstance = new __WEBPACK_IMPORTED_MODULE_0_timeago_js___default.a();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  components: {\n    'commit-component': __WEBPACK_IMPORTED_MODULE_8__vue_shared_components_commit__[\"a\" /* default */],\n    'actions-component': __WEBPACK_IMPORTED_MODULE_2__environment_actions__[\"a\" /* default */],\n    'external-url-component': __WEBPACK_IMPORTED_MODULE_3__environment_external_url__[\"a\" /* default */],\n    'stop-component': __WEBPACK_IMPORTED_MODULE_4__environment_stop__[\"a\" /* default */],\n    'rollback-component': __WEBPACK_IMPORTED_MODULE_5__environment_rollback__[\"a\" /* default */],\n    'terminal-button-component': __WEBPACK_IMPORTED_MODULE_6__environment_terminal_button__[\"a\" /* default */],\n    'monitoring-button-component': __WEBPACK_IMPORTED_MODULE_7__environment_monitoring__[\"a\" /* default */]\n  },\n\n  props: {\n    model: {\n      type: Object,\n      required: true,\n      default: function _default() {\n        return {};\n      }\n    },\n\n    canCreateDeployment: {\n      type: Boolean,\n      required: false,\n      default: false\n    },\n\n    canReadEnvironment: {\n      type: Boolean,\n      required: false,\n      default: false\n    },\n\n    service: {\n      type: Object,\n      required: true\n    }\n  },\n\n  computed: {\n    /**\n     * Verifies if `last_deployment` key exists in the current Envrionment.\n     * This key is required to render most of the html - this method works has\n     * an helper.\n     *\n     * @returns {Boolean}\n     */\n    hasLastDeploymentKey: function hasLastDeploymentKey() {\n      if (this.model && this.model.last_deployment && !this.$options.isObjectEmpty(this.model.last_deployment)) {\n        return true;\n      }\n      return false;\n    },\n\n\n    /**\n     * Verifies is the given environment has manual actions.\n     * Used to verify if we should render them or nor.\n     *\n     * @returns {Boolean|Undefined}\n     */\n    hasManualActions: function hasManualActions() {\n      return this.model && this.model.last_deployment && this.model.last_deployment.manual_actions && this.model.last_deployment.manual_actions.length > 0;\n    },\n\n\n    /**\n     * Returns the value of the `stop_action?` key provided in the response.\n     *\n     * @returns {Boolean}\n     */\n    hasStopAction: function hasStopAction() {\n      return this.model && this.model['stop_action?'];\n    },\n\n\n    /**\n     * Verifies if the `deployable` key is present in `last_deployment` key.\n     * Used to verify whether we should or not render the rollback partial.\n     *\n     * @returns {Boolean|Undefined}\n     */\n    canRetry: function canRetry() {\n      return this.model && this.hasLastDeploymentKey && this.model.last_deployment && this.model.last_deployment.deployable;\n    },\n\n\n    /**\n     * Verifies if the date to be shown is present.\n     *\n     * @returns {Boolean|Undefined}\n     */\n    canShowDate: function canShowDate() {\n      return this.model && this.model.last_deployment && this.model.last_deployment.deployable && this.model.last_deployment.deployable !== undefined;\n    },\n\n\n    /**\n     * Human readable date.\n     *\n     * @returns {String}\n     */\n    createdDate: function createdDate() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.deployable && this.model.last_deployment.deployable.created_at) {\n        return timeagoInstance.format(this.model.last_deployment.deployable.created_at);\n      }\n      return '';\n    },\n\n\n    /**\n     * Returns the manual actions with the name parsed.\n     *\n     * @returns {Array.<Object>|Undefined}\n     */\n    manualActions: function manualActions() {\n      if (this.hasManualActions) {\n        return this.model.last_deployment.manual_actions.map(function (action) {\n          var parsedAction = {\n            name: gl.text.humanize(action.name),\n            play_path: action.play_path,\n            playable: action.playable\n          };\n          return parsedAction;\n        });\n      }\n      return [];\n    },\n\n\n    /**\n     * Builds the string used in the user image alt attribute.\n     *\n     * @returns {String}\n     */\n    userImageAltDescription: function userImageAltDescription() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.user && this.model.last_deployment.user.username) {\n        return this.model.last_deployment.user.username + '\\'s avatar\\'';\n      }\n      return '';\n    },\n\n\n    /**\n     * If provided, returns the commit tag.\n     *\n     * @returns {String|Undefined}\n     */\n    commitTag: function commitTag() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.tag) {\n        return this.model.last_deployment.tag;\n      }\n      return undefined;\n    },\n\n\n    /**\n     * If provided, returns the commit ref.\n     *\n     * @returns {Object|Undefined}\n     */\n    commitRef: function commitRef() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.ref) {\n        return this.model.last_deployment.ref;\n      }\n      return undefined;\n    },\n\n\n    /**\n     * If provided, returns the commit url.\n     *\n     * @returns {String|Undefined}\n     */\n    commitUrl: function commitUrl() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.commit && this.model.last_deployment.commit.commit_path) {\n        return this.model.last_deployment.commit.commit_path;\n      }\n      return undefined;\n    },\n\n\n    /**\n     * If provided, returns the commit short sha.\n     *\n     * @returns {String|Undefined}\n     */\n    commitShortSha: function commitShortSha() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.commit && this.model.last_deployment.commit.short_id) {\n        return this.model.last_deployment.commit.short_id;\n      }\n      return undefined;\n    },\n\n\n    /**\n     * If provided, returns the commit title.\n     *\n     * @returns {String|Undefined}\n     */\n    commitTitle: function commitTitle() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.commit && this.model.last_deployment.commit.title) {\n        return this.model.last_deployment.commit.title;\n      }\n      return undefined;\n    },\n\n\n    /**\n     * If provided, returns the commit tag.\n     *\n     * @returns {Object|Undefined}\n     */\n    commitAuthor: function commitAuthor() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.commit && this.model.last_deployment.commit.author) {\n        return this.model.last_deployment.commit.author;\n      }\n\n      return undefined;\n    },\n\n\n    /**\n     * Verifies if the `retry_path` key is present and returns its value.\n     *\n     * @returns {String|Undefined}\n     */\n    retryUrl: function retryUrl() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.deployable && this.model.last_deployment.deployable.retry_path) {\n        return this.model.last_deployment.deployable.retry_path;\n      }\n      return undefined;\n    },\n\n\n    /**\n     * Verifies if the `last?` key is present and returns its value.\n     *\n     * @returns {Boolean|Undefined}\n     */\n    isLastDeployment: function isLastDeployment() {\n      return this.model && this.model.last_deployment && this.model.last_deployment['last?'];\n    },\n\n\n    /**\n     * Builds the name of the builds needed to display both the name and the id.\n     *\n     * @returns {String}\n     */\n    buildName: function buildName() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.deployable) {\n        return this.model.last_deployment.deployable.name + ' #' + this.model.last_deployment.deployable.id;\n      }\n      return '';\n    },\n\n\n    /**\n     * Builds the needed string to show the internal id.\n     *\n     * @returns {String}\n     */\n    deploymentInternalId: function deploymentInternalId() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.iid) {\n        return '#' + this.model.last_deployment.iid;\n      }\n      return '';\n    },\n\n\n    /**\n     * Verifies if the user object is present under last_deployment object.\n     *\n     * @returns {Boolean}\n     */\n    deploymentHasUser: function deploymentHasUser() {\n      return this.model && !this.$options.isObjectEmpty(this.model.last_deployment) && !this.$options.isObjectEmpty(this.model.last_deployment.user);\n    },\n\n\n    /**\n     * Returns the user object nested with the last_deployment object.\n     * Used to render the template.\n     *\n     * @returns {Object}\n     */\n    deploymentUser: function deploymentUser() {\n      if (this.model && !this.$options.isObjectEmpty(this.model.last_deployment) && !this.$options.isObjectEmpty(this.model.last_deployment.user)) {\n        return this.model.last_deployment.user;\n      }\n      return {};\n    },\n\n\n    /**\n     * Verifies if the build name column should be rendered by verifing\n     * if all the information needed is present\n     * and if the environment is not a folder.\n     *\n     * @returns {Boolean}\n     */\n    shouldRenderBuildName: function shouldRenderBuildName() {\n      return !this.model.isFolder && !this.$options.isObjectEmpty(this.model.last_deployment) && !this.$options.isObjectEmpty(this.model.last_deployment.deployable);\n    },\n\n\n    /**\n     * Verifies the presence of all the keys needed to render the buil_path.\n     *\n     * @return {String}\n     */\n    buildPath: function buildPath() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.deployable && this.model.last_deployment.deployable.build_path) {\n        return this.model.last_deployment.deployable.build_path;\n      }\n\n      return '';\n    },\n\n\n    /**\n     * Verifies the presence of all the keys needed to render the external_url.\n     *\n     * @return {String}\n     */\n    externalURL: function externalURL() {\n      if (this.model && this.model.external_url) {\n        return this.model.external_url;\n      }\n\n      return '';\n    },\n\n\n    /**\n     * Verifies if deplyment internal ID should be rendered by verifing\n     * if all the information needed is present\n     * and if the environment is not a folder.\n     *\n     * @returns {Boolean}\n     */\n    shouldRenderDeploymentID: function shouldRenderDeploymentID() {\n      return !this.model.isFolder && !this.$options.isObjectEmpty(this.model.last_deployment) && this.model.last_deployment.iid !== undefined;\n    },\n    environmentPath: function environmentPath() {\n      if (this.model && this.model.environment_path) {\n        return this.model.environment_path;\n      }\n\n      return '';\n    },\n    monitoringUrl: function monitoringUrl() {\n      if (this.model && this.model.metrics_path) {\n        return this.model.metrics_path;\n      }\n\n      return '';\n    },\n\n\n    /**\n     * Constructs folder URL based on the current location and the folder id.\n     *\n     * @return {String}\n     */\n    folderUrl: function folderUrl() {\n      return window.location.pathname + '/folders/' + this.model.folderName;\n    }\n  },\n\n  /**\n   * Helper to verify if certain given object are empty.\n   * Should be replaced by lodash _.isEmpty - https://lodash.com/docs/4.17.2#isEmpty\n   * @param  {Object} object\n   * @returns {Bollean}\n   */\n  isObjectEmpty: function isObjectEmpty(object) {\n    for (var key in object) {\n      // eslint-disable-line\n      if (hasOwnProperty.call(object, key)) {\n        return false;\n      }\n    }\n    return true;\n  },\n\n\n  methods: {\n    onClickFolder: function onClickFolder() {\n      __WEBPACK_IMPORTED_MODULE_9__event_hub__[\"a\" /* default */].$emit('toggleFolder', this.model, this.folderUrl);\n    }\n  },\n\n  template: '\\n    <tr :class=\"{ \\'js-child-row\\': model.isChildren }\">\\n      <td>\\n        <a v-if=\"!model.isFolder\"\\n          class=\"environment-name\"\\n          :class=\"{ \\'prepend-left-default\\': model.isChildren }\"\\n          :href=\"environmentPath\">\\n          {{model.name}}\\n        </a>\\n        <span v-else\\n          class=\"folder-name\"\\n          @click=\"onClickFolder\"\\n          role=\"button\">\\n\\n          <span class=\"folder-icon\">\\n            <i\\n              v-show=\"model.isOpen\"\\n              class=\"fa fa-caret-down\"\\n              aria-hidden=\"true\" />\\n            <i\\n              v-show=\"!model.isOpen\"\\n              class=\"fa fa-caret-right\"\\n              aria-hidden=\"true\"/>\\n          </span>\\n\\n          <span class=\"folder-icon\">\\n            <i class=\"fa fa-folder\" aria-hidden=\"true\"></i>\\n          </span>\\n\\n          <span>\\n            {{model.folderName}}\\n          </span>\\n\\n          <span class=\"badge\">\\n            {{model.size}}\\n          </span>\\n        </span>\\n      </td>\\n\\n      <td class=\"deployment-column\">\\n        <span v-if=\"shouldRenderDeploymentID\">\\n          {{deploymentInternalId}}\\n        </span>\\n\\n        <span v-if=\"!model.isFolder && deploymentHasUser\">\\n          by\\n          <a :href=\"deploymentUser.web_url\" class=\"js-deploy-user-container\">\\n            <img class=\"avatar has-tooltip s20\"\\n              :src=\"deploymentUser.avatar_url\"\\n              :alt=\"userImageAltDescription\"\\n              :title=\"deploymentUser.username\" />\\n          </a>\\n        </span>\\n      </td>\\n\\n      <td class=\"environments-build-cell\">\\n        <a v-if=\"shouldRenderBuildName\"\\n          class=\"build-link\"\\n          :href=\"buildPath\">\\n          {{buildName}}\\n        </a>\\n      </td>\\n\\n      <td>\\n        <div v-if=\"!model.isFolder && hasLastDeploymentKey\" class=\"js-commit-component\">\\n          <commit-component\\n            :tag=\"commitTag\"\\n            :commit-ref=\"commitRef\"\\n            :commit-url=\"commitUrl\"\\n            :short-sha=\"commitShortSha\"\\n            :title=\"commitTitle\"\\n            :author=\"commitAuthor\"/>\\n        </div>\\n        <p v-if=\"!model.isFolder && !hasLastDeploymentKey\" class=\"commit-title\">\\n          No deployments yet\\n        </p>\\n      </td>\\n\\n      <td>\\n        <span v-if=\"!model.isFolder && canShowDate\"\\n          class=\"environment-created-date-timeago\">\\n          {{createdDate}}\\n        </span>\\n      </td>\\n\\n      <td class=\"environments-actions\">\\n        <div v-if=\"!model.isFolder\" class=\"btn-group pull-right\" role=\"group\">\\n          <actions-component v-if=\"hasManualActions && canCreateDeployment\"\\n            :service=\"service\"\\n            :actions=\"manualActions\"/>\\n\\n          <external-url-component v-if=\"externalURL && canReadEnvironment\"\\n            :external-url=\"externalURL\"/>\\n\\n          <monitoring-button-component v-if=\"monitoringUrl && canReadEnvironment\"\\n            :monitoring-url=\"monitoringUrl\"/>\\n\\n          <terminal-button-component v-if=\"model && model.terminal_path\"\\n            :terminal-path=\"model.terminal_path\"/>\\n\\n          <stop-component v-if=\"hasStopAction && canCreateDeployment\"\\n            :stop-url=\"model.stop_path\"\\n            :service=\"service\"/>\\n\\n          <rollback-component v-if=\"canRetry && canCreateDeployment\"\\n            :is-last-deployment=\"isLastDeployment\"\\n            :retry-url=\"retryUrl\"\\n            :service=\"service\"/>\\n        </div>\\n      </td>\\n    </tr>\\n  '\n});\n\n/***/ }),\n\n/***/ \"AhTQ\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\n * Renders the external url link in environments table.\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: {\n    externalUrl: {\n      type: String,\n      default: ''\n    }\n  },\n\n  computed: {\n    title: function title() {\n      return 'Open';\n    }\n  },\n\n  template: '\\n    <a\\n      class=\"btn external-url has-tooltip\"\\n      data-container=\"body\"\\n      :href=\"externalUrl\"\\n      target=\"_blank\"\\n      rel=\"noopener noreferrer nofollow\"\\n      :title=\"title\"\\n      :aria-label=\"title\">\\n      <i class=\"fa fa-external-link\" aria-hidden=\"true\"></i>\\n    </a>\\n  '\n});\n\n/***/ }),\n\n/***/ \"FaWK\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__event_hub__ = __webpack_require__(\"SdTk\");\n/* global Flash */\n/* eslint-disable no-new */\n/**\n * Renders Rollback or Re deploy button in environments table depending\n * of the provided property `isLastDeployment`.\n *\n * Makes a post request when the button is clicked.\n */\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: {\n    retryUrl: {\n      type: String,\n      default: ''\n    },\n\n    isLastDeployment: {\n      type: Boolean,\n      default: true\n    },\n\n    service: {\n      type: Object,\n      required: true\n    }\n  },\n\n  data: function data() {\n    return {\n      isLoading: false\n    };\n  },\n\n\n  methods: {\n    onClick: function onClick() {\n      var _this = this;\n\n      this.isLoading = true;\n\n      $(this.$el).tooltip('destroy');\n\n      this.service.postAction(this.retryUrl).then(function () {\n        _this.isLoading = false;\n        __WEBPACK_IMPORTED_MODULE_0__event_hub__[\"a\" /* default */].$emit('refreshEnvironments');\n      }).catch(function () {\n        _this.isLoading = false;\n        new Flash('An error occured while making the request.');\n      });\n    }\n  },\n\n  template: '\\n    <button type=\"button\"\\n      class=\"btn\"\\n      @click=\"onClick\"\\n      :disabled=\"isLoading\">\\n\\n      <span v-if=\"isLastDeployment\">\\n        Re-deploy\\n      </span>\\n      <span v-else>\\n        Rollback\\n      </span>\\n\\n      <i v-if=\"isLoading\" class=\"fa fa-spinner fa-spin\" aria-hidden=\"true\"></i>\\n    </button>\\n  '\n});\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(\"lwLq\")))\n\n/***/ }),\n\n/***/ \"LIwm\":\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 10 11\\\" class=\\\"icon-play\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"m9.283 6.47l-7.564 4.254c-.949.534-1.719.266-1.719-.576v-9.292c0-.852.756-1.117 1.719-.576l7.564 4.254c.949.534.963 1.392 0 1.934\\\"/></svg>\\n\"\n\n/***/ }),\n\n/***/ \"PPOU\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\n * Renders the Monitoring (Metrics) link in environments table.\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: {\n    monitoringUrl: {\n      type: String,\n      default: '',\n      required: true\n    }\n  },\n\n  computed: {\n    title: function title() {\n      return 'Monitoring';\n    }\n  },\n\n  template: '\\n    <a\\n      class=\"btn monitoring-url has-tooltip\"\\n      data-container=\"body\"\\n      :href=\"monitoringUrl\"\\n      target=\"_blank\"\\n      rel=\"noopener noreferrer nofollow\"\\n      :title=\"title\"\\n      :aria-label=\"title\">\\n      <i class=\"fa fa-area-chart\" aria-hidden=\"true\"></i>\\n    </a>\\n  '\n});\n\n/***/ }),\n\n/***/ \"Q/iC\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_icons_icon_terminal_svg__ = __webpack_require__(\"WEra\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_icons_icon_terminal_svg___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_icons_icon_terminal_svg__);\n/**\n * Renders a terminal button to open a web terminal.\n * Used in environments table.\n */\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: {\n    terminalPath: {\n      type: String,\n      required: false,\n      default: ''\n    }\n  },\n\n  data: function data() {\n    return {\n      terminalIconSvg: __WEBPACK_IMPORTED_MODULE_0_icons_icon_terminal_svg___default.a\n    };\n  },\n\n\n  computed: {\n    title: function title() {\n      return 'Terminal';\n    }\n  },\n\n  template: '\\n    <a class=\"btn terminal-button has-tooltip\"\\n      data-container=\"body\"\\n      :title=\"title\"\\n      :aria-label=\"title\"\\n      :href=\"terminalPath\">\\n      ' + __WEBPACK_IMPORTED_MODULE_0_icons_icon_terminal_svg___default.a + '\\n    </a>\\n  '\n});\n\n/***/ }),\n\n/***/ \"R8Dz\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_icons_icon_play_svg__ = __webpack_require__(\"LIwm\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_icons_icon_play_svg___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_icons_icon_play_svg__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__event_hub__ = __webpack_require__(\"SdTk\");\n/* global Flash */\n/* eslint-disable no-new */\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: {\n    actions: {\n      type: Array,\n      required: false,\n      default: function _default() {\n        return [];\n      }\n    },\n\n    service: {\n      type: Object,\n      required: true\n    }\n  },\n\n  data: function data() {\n    return {\n      playIconSvg: __WEBPACK_IMPORTED_MODULE_0_icons_icon_play_svg___default.a,\n      isLoading: false\n    };\n  },\n\n\n  computed: {\n    title: function title() {\n      return 'Deploy to...';\n    }\n  },\n\n  methods: {\n    onClickAction: function onClickAction(endpoint) {\n      var _this = this;\n\n      this.isLoading = true;\n\n      $(this.$refs.tooltip).tooltip('destroy');\n\n      this.service.postAction(endpoint).then(function () {\n        _this.isLoading = false;\n        __WEBPACK_IMPORTED_MODULE_1__event_hub__[\"a\" /* default */].$emit('refreshEnvironments');\n      }).catch(function () {\n        _this.isLoading = false;\n        new Flash('An error occured while making the request.');\n      });\n    },\n    isActionDisabled: function isActionDisabled(action) {\n      if (action.playable === undefined) {\n        return false;\n      }\n\n      return !action.playable;\n    }\n  },\n\n  template: '\\n    <div class=\"btn-group\" role=\"group\">\\n      <button\\n        type=\"button\"\\n        class=\"dropdown btn btn-default dropdown-new js-dropdown-play-icon-container has-tooltip\"\\n        data-container=\"body\"\\n        data-toggle=\"dropdown\"\\n        ref=\"tooltip\"\\n        :title=\"title\"\\n        :aria-label=\"title\"\\n        :disabled=\"isLoading\">\\n        <span>\\n          <span v-html=\"playIconSvg\"></span>\\n          <i\\n            class=\"fa fa-caret-down\"\\n            aria-hidden=\"true\"/>\\n          <i\\n            v-if=\"isLoading\"\\n            class=\"fa fa-spinner fa-spin\"\\n            aria-hidden=\"true\"/>\\n        </span>\\n      </button>\\n\\n      <ul class=\"dropdown-menu dropdown-menu-align-right\">\\n        <li v-for=\"action in actions\">\\n          <button\\n            type=\"button\"\\n            class=\"js-manual-action-link no-btn btn\"\\n            @click=\"onClickAction(action.play_path)\"\\n            :class=\"{ \\'disabled\\': isActionDisabled(action) }\"\\n            :disabled=\"isActionDisabled(action)\">\\n            ' + __WEBPACK_IMPORTED_MODULE_0_icons_icon_play_svg___default.a + '\\n            <span>\\n              {{action.name}}\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n  </div>\\n  '\n});\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(\"lwLq\")))\n\n/***/ }),\n\n/***/ \"SdTk\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"JTVE\");\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"]());\n\n/***/ }),\n\n/***/ \"WEra\":\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg width=\\\"19\\\" height=\\\"14\\\" viewBox=\\\"0 0 19 14\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><rect fill=\\\"#848484\\\" x=\\\"7.2\\\" y=\\\"9.25\\\" width=\\\"6.46\\\" height=\\\"1.5\\\" rx=\\\".5\\\"/><path d=\\\"M5.851 7.016L3.81 9.103a.503.503 0 0 0 .017.709l.35.334c.207.198.524.191.717-.006l2.687-2.748a.493.493 0 0 0 .137-.376.493.493 0 0 0-.137-.376L4.894 3.892a.507.507 0 0 0-.717-.006l-.35.334a.503.503 0 0 0-.017.709L5.85 7.016z\\\"/><path d=\\\"M1.25 11.497c0 .691.562 1.253 1.253 1.253h13.994c.694 0 1.253-.56 1.253-1.253V2.503c0-.691-.562-1.253-1.253-1.253H2.503c-.694 0-1.253.56-1.253 1.253v8.994zM2.503 0h13.994A2.504 2.504 0 0 1 19 2.503v8.994A2.501 2.501 0 0 1 16.497 14H2.503A2.504 2.504 0 0 1 0 11.497V2.503A2.501 2.501 0 0 1 2.503 0z\\\"/></svg>\\n\"\n\n/***/ }),\n\n/***/ \"XJ/8\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_environment__ = __webpack_require__(\"vm9i\");\n\n\n$(function () {\n  window.gl = window.gl || {};\n\n  if (gl.EnvironmentsListApp) {\n    gl.EnvironmentsListApp.$destroy(true);\n  }\n\n  gl.EnvironmentsListApp = new __WEBPACK_IMPORTED_MODULE_0__components_environment__[\"a\" /* default */]({\n    el: document.querySelector('#environments-list-view')\n  });\n});\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(\"lwLq\")))\n\n/***/ }),\n\n/***/ \"ZmZM\":\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 36 18\\\" enable-background=\\\"new 0 0 36 18\\\"><path d=\\\"m34 7h-7.2c-.9-4-4.5-7-8.8-7s-7.9 3-8.8 7h-7.2c-1.1 0-2 .9-2 2 0 1.1.9 2 2 2h7.2c.9 4 4.5 7 8.8 7s7.9-3 8.8-7h7.2c1.1 0 2-.9 2-2 0-1.1-.9-2-2-2m-16 7c-2.8 0-5-2.2-5-5s2.2-5 5-5 5 2.2 5 5-2.2 5-5 5\\\"/></svg>\\n\"\n\n/***/ }),\n\n/***/ \"jNb8\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__environment_item__ = __webpack_require__(\"3qMg\");\n/**\n * Render environments table.\n */\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  components: {\n    'environment-item': __WEBPACK_IMPORTED_MODULE_0__environment_item__[\"a\" /* default */]\n  },\n\n  props: {\n    environments: {\n      type: Array,\n      required: true,\n      default: function _default() {\n        return [];\n      }\n    },\n\n    canReadEnvironment: {\n      type: Boolean,\n      required: false,\n      default: false\n    },\n\n    canCreateDeployment: {\n      type: Boolean,\n      required: false,\n      default: false\n    },\n\n    service: {\n      type: Object,\n      required: true\n    },\n\n    isLoadingFolderContent: {\n      type: Boolean,\n      required: false,\n      default: false\n    }\n  },\n\n  methods: {\n    folderUrl: function folderUrl(model) {\n      return window.location.pathname + '/folders/' + model.folderName;\n    }\n  },\n\n  template: '\\n    <table class=\"table ci-table\">\\n      <thead>\\n        <tr>\\n          <th class=\"environments-name\">Environment</th>\\n          <th class=\"environments-deploy\">Last deployment</th>\\n          <th class=\"environments-build\">Job</th>\\n          <th class=\"environments-commit\">Commit</th>\\n          <th class=\"environments-date\">Updated</th>\\n          <th class=\"environments-actions\"></th>\\n        </tr>\\n      </thead>\\n      <tbody>\\n        <template v-for=\"model in environments\"\\n          v-bind:model=\"model\">\\n          <tr is=\"environment-item\"\\n            :model=\"model\"\\n            :can-create-deployment=\"canCreateDeployment\"\\n            :can-read-environment=\"canReadEnvironment\"\\n            :service=\"service\"></tr>\\n\\n          <template v-if=\"model.isFolder && model.isOpen && model.children && model.children.length > 0\">\\n            <tr v-if=\"isLoadingFolderContent\">\\n              <td colspan=\"6\" class=\"text-center\">\\n                <i class=\"fa fa-spin fa-spinner fa-2x\" aria-hidden=\"true\"/>\\n              </td>\\n            </tr>\\n\\n            <template v-else>\\n              <tr is=\"environment-item\"\\n                v-for=\"children in model.children\"\\n                :model=\"children\"\\n                :can-create-deployment=\"canCreateDeployment\"\\n                :can-read-environment=\"canReadEnvironment\"\\n                :service=\"service\"></tr>\\n\\n              <tr>\\n                <td colspan=\"6\" class=\"text-center\">\\n                  <a :href=\"folderUrl(model)\" class=\"btn btn-default\">\\n                    Show all\\n                  </a>\\n                </td>\\n              </tr>\\n            </template>\\n          </template>\\n        </template>\\n      </tbody>\\n    </table>\\n  '\n});\n\n/***/ }),\n\n/***/ \"kXVd\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__event_hub__ = __webpack_require__(\"SdTk\");\n/* global Flash */\n/* eslint-disable no-new, no-alert */\n/**\n * Renders the stop \"button\" that allows stop an environment.\n * Used in environments table.\n */\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: {\n    stopUrl: {\n      type: String,\n      default: ''\n    },\n\n    service: {\n      type: Object,\n      required: true\n    }\n  },\n\n  data: function data() {\n    return {\n      isLoading: false\n    };\n  },\n\n\n  computed: {\n    title: function title() {\n      return 'Stop';\n    }\n  },\n\n  methods: {\n    onClick: function onClick() {\n      var _this = this;\n\n      if (confirm('Are you sure you want to stop this environment?')) {\n        this.isLoading = true;\n\n        $(this.$el).tooltip('destroy');\n\n        this.service.postAction(this.retryUrl).then(function () {\n          _this.isLoading = false;\n          __WEBPACK_IMPORTED_MODULE_0__event_hub__[\"a\" /* default */].$emit('refreshEnvironments');\n        }).catch(function () {\n          _this.isLoading = false;\n          new Flash('An error occured while making the request.', 'alert');\n        });\n      }\n    }\n  },\n\n  template: '\\n    <button type=\"button\"\\n      class=\"btn stop-env-link has-tooltip\"\\n      data-container=\"body\"\\n      @click=\"onClick\"\\n      :disabled=\"isLoading\"\\n      :title=\"title\"\\n      :aria-label=\"title\">\\n      <i class=\"fa fa-stop stop-env-icon\" aria-hidden=\"true\"></i>\\n      <i v-if=\"isLoading\" class=\"fa fa-spinner fa-spin\" aria-hidden=\"true\"></i>\\n    </button>\\n  '\n});\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(\"lwLq\")))\n\n/***/ }),\n\n/***/ \"pGP2\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"JTVE\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_resource__ = __webpack_require__(\"7UJR\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_resource___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_vue_resource__);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* eslint-disable class-methods-use-this */\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_1_vue_resource___default.a);\n\nvar EnvironmentsService = function () {\n  function EnvironmentsService(endpoint) {\n    _classCallCheck(this, EnvironmentsService);\n\n    this.environments = __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].resource(endpoint);\n    this.folderResults = 3;\n  }\n\n  _createClass(EnvironmentsService, [{\n    key: 'get',\n    value: function get(scope, page) {\n      return this.environments.get({ scope: scope, page: page });\n    }\n  }, {\n    key: 'postAction',\n    value: function postAction(endpoint) {\n      return __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].http.post(endpoint, {}, { emulateJSON: true });\n    }\n  }, {\n    key: 'getFolderContent',\n    value: function getFolderContent(folderUrl) {\n      return __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].http.get(folderUrl + '.json?per_page=' + this.folderResults);\n    }\n  }]);\n\n  return EnvironmentsService;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (EnvironmentsService);\n\n/***/ }),\n\n/***/ \"vm9i\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"JTVE\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__services_environments_service__ = __webpack_require__(\"pGP2\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__environments_table__ = __webpack_require__(\"jNb8\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__stores_environments_store__ = __webpack_require__(\"w+iT\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__vue_shared_components_table_pagination__ = __webpack_require__(\"03o2\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_utils_common_utils__ = __webpack_require__(\"RsTm\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_utils_common_utils___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__lib_utils_common_utils__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__event_hub__ = __webpack_require__(\"SdTk\");\n/* eslint-disable no-new */\n/* global Flash */\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].component('environment-component', {\n\n  components: {\n    'environment-table': __WEBPACK_IMPORTED_MODULE_2__environments_table__[\"a\" /* default */],\n    'table-pagination': __WEBPACK_IMPORTED_MODULE_4__vue_shared_components_table_pagination__[\"a\" /* default */]\n  },\n\n  data: function data() {\n    var environmentsData = document.querySelector('#environments-list-view').dataset;\n    var store = new __WEBPACK_IMPORTED_MODULE_3__stores_environments_store__[\"a\" /* default */]();\n\n    return {\n      store: store,\n      state: store.state,\n      visibility: 'available',\n      isLoading: false,\n      isLoadingFolderContent: false,\n      cssContainerClass: environmentsData.cssClass,\n      endpoint: environmentsData.environmentsDataEndpoint,\n      canCreateDeployment: environmentsData.canCreateDeployment,\n      canReadEnvironment: environmentsData.canReadEnvironment,\n      canCreateEnvironment: environmentsData.canCreateEnvironment,\n      projectEnvironmentsPath: environmentsData.projectEnvironmentsPath,\n      projectStoppedEnvironmentsPath: environmentsData.projectStoppedEnvironmentsPath,\n      newEnvironmentPath: environmentsData.newEnvironmentPath,\n      helpPagePath: environmentsData.helpPagePath,\n\n      // Pagination Properties,\n      paginationInformation: {},\n      pageNumber: 1\n    };\n  },\n\n\n  computed: {\n    scope: function scope() {\n      return gl.utils.getParameterByName('scope');\n    },\n    canReadEnvironmentParsed: function canReadEnvironmentParsed() {\n      return gl.utils.convertPermissionToBoolean(this.canReadEnvironment);\n    },\n    canCreateDeploymentParsed: function canCreateDeploymentParsed() {\n      return gl.utils.convertPermissionToBoolean(this.canCreateDeployment);\n    },\n    canCreateEnvironmentParsed: function canCreateEnvironmentParsed() {\n      return gl.utils.convertPermissionToBoolean(this.canCreateEnvironment);\n    }\n  },\n\n  /**\n   * Fetches all the environments and stores them.\n   * Toggles loading property.\n   */\n  created: function created() {\n    this.service = new __WEBPACK_IMPORTED_MODULE_1__services_environments_service__[\"a\" /* default */](this.endpoint);\n\n    this.fetchEnvironments();\n\n    __WEBPACK_IMPORTED_MODULE_6__event_hub__[\"a\" /* default */].$on('refreshEnvironments', this.fetchEnvironments);\n    __WEBPACK_IMPORTED_MODULE_6__event_hub__[\"a\" /* default */].$on('toggleFolder', this.toggleFolder);\n  },\n  beforeDestroyed: function beforeDestroyed() {\n    __WEBPACK_IMPORTED_MODULE_6__event_hub__[\"a\" /* default */].$off('refreshEnvironments');\n    __WEBPACK_IMPORTED_MODULE_6__event_hub__[\"a\" /* default */].$off('toggleFolder');\n  },\n\n\n  methods: {\n    toggleFolder: function toggleFolder(folder, folderUrl) {\n      this.store.toggleFolder(folder);\n\n      if (!folder.isOpen) {\n        this.fetchChildEnvironments(folder, folderUrl);\n      }\n    },\n\n\n    /**\n     * Will change the page number and update the URL.\n     *\n     * @param  {Number} pageNumber desired page to go to.\n     * @return {String}\n     */\n    changePage: function changePage(pageNumber) {\n      var param = gl.utils.setParamInURL('page', pageNumber);\n\n      gl.utils.visitUrl(param);\n      return param;\n    },\n    fetchEnvironments: function fetchEnvironments() {\n      var _this = this;\n\n      var scope = gl.utils.getParameterByName('scope') || this.visibility;\n      var pageNumber = gl.utils.getParameterByName('page') || this.pageNumber;\n\n      this.isLoading = true;\n\n      return this.service.get(scope, pageNumber).then(function (resp) {\n        return {\n          headers: resp.headers,\n          body: resp.json()\n        };\n      }).then(function (response) {\n        _this.store.storeAvailableCount(response.body.available_count);\n        _this.store.storeStoppedCount(response.body.stopped_count);\n        _this.store.storeEnvironments(response.body.environments);\n        _this.store.setPagination(response.headers);\n      }).then(function () {\n        _this.isLoading = false;\n      }).catch(function () {\n        _this.isLoading = false;\n        new Flash('An error occurred while fetching the environments.');\n      });\n    },\n    fetchChildEnvironments: function fetchChildEnvironments(folder, folderUrl) {\n      var _this2 = this;\n\n      this.isLoadingFolderContent = true;\n\n      this.service.getFolderContent(folderUrl).then(function (resp) {\n        return resp.json();\n      }).then(function (response) {\n        _this2.store.setfolderContent(folder, response.environments);\n        _this2.isLoadingFolderContent = false;\n      }).catch(function () {\n        _this2.isLoadingFolderContent = false;\n        new Flash('An error occurred while fetching the environments.');\n      });\n    }\n  },\n\n  template: '\\n    <div :class=\"cssContainerClass\">\\n      <div class=\"top-area\">\\n        <ul v-if=\"!isLoading\" class=\"nav-links\">\\n          <li v-bind:class=\"{ \\'active\\': scope === null || scope === \\'available\\' }\">\\n            <a :href=\"projectEnvironmentsPath\">\\n              Available\\n              <span class=\"badge js-available-environments-count\">\\n                {{state.availableCounter}}\\n              </span>\\n            </a>\\n          </li>\\n          <li v-bind:class=\"{ \\'active\\' : scope === \\'stopped\\' }\">\\n            <a :href=\"projectStoppedEnvironmentsPath\">\\n              Stopped\\n              <span class=\"badge js-stopped-environments-count\">\\n                {{state.stoppedCounter}}\\n              </span>\\n            </a>\\n          </li>\\n        </ul>\\n        <div v-if=\"canCreateEnvironmentParsed && !isLoading\" class=\"nav-controls\">\\n          <a :href=\"newEnvironmentPath\" class=\"btn btn-create\">\\n            New environment\\n          </a>\\n        </div>\\n      </div>\\n\\n      <div class=\"content-list environments-container\">\\n        <div class=\"environments-list-loading text-center\" v-if=\"isLoading\">\\n          <i class=\"fa fa-spinner fa-spin\" aria-hidden=\"true\"></i>\\n        </div>\\n\\n        <div class=\"blank-state blank-state-no-icon\"\\n          v-if=\"!isLoading && state.environments.length === 0\">\\n          <h2 class=\"blank-state-title js-blank-state-title\">\\n            You don\\'t have any environments right now.\\n          </h2>\\n          <p class=\"blank-state-text\">\\n            Environments are places where code gets deployed, such as staging or production.\\n            <br />\\n            <a :href=\"helpPagePath\">\\n              Read more about environments\\n            </a>\\n          </p>\\n\\n          <a v-if=\"canCreateEnvironmentParsed\"\\n            :href=\"newEnvironmentPath\"\\n            class=\"btn btn-create js-new-environment-button\">\\n            New Environment\\n          </a>\\n        </div>\\n\\n        <div class=\"table-holder\"\\n          v-if=\"!isLoading && state.environments.length > 0\">\\n\\n          <environment-table\\n            :environments=\"state.environments\"\\n            :can-create-deployment=\"canCreateDeploymentParsed\"\\n            :can-read-environment=\"canReadEnvironmentParsed\"\\n            :service=\"service\"\\n            :is-loading-folder-content=\"isLoadingFolderContent\" />\\n        </div>\\n\\n        <table-pagination v-if=\"state.paginationInformation && state.paginationInformation.totalPages > 1\"\\n          :change=\"changePage\"\\n          :pageInfo=\"state.paginationInformation\">\\n        </table-pagination>\\n      </div>\\n    </div>\\n  '\n}));\n\n/***/ }),\n\n/***/ \"w+iT\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__lib_utils_common_utils__ = __webpack_require__(\"RsTm\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__lib_utils_common_utils___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__lib_utils_common_utils__);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n/**\n * Environments Store.\n *\n * Stores received environments, count of stopped environments and count of\n * available environments.\n */\n\nvar EnvironmentsStore = function () {\n  function EnvironmentsStore() {\n    _classCallCheck(this, EnvironmentsStore);\n\n    this.state = {};\n    this.state.environments = [];\n    this.state.stoppedCounter = 0;\n    this.state.availableCounter = 0;\n    this.state.paginationInformation = {};\n\n    return this;\n  }\n\n  /**\n   *\n   * Stores the received environments.\n   *\n   * In the main environments endpoint, each environment has the following schema\n   * { name: String, size: Number, latest: Object }\n   * In the endpoint to retrieve environments from each folder, the environment does\n   * not have the `latest` key and the data is all in the root level.\n   * To avoid doing this check in the view, we store both cases the same by extracting\n   * what is inside the `latest` key.\n   *\n   * If the `size` is bigger than 1, it means it should be rendered as a folder.\n   * In those cases we add `isFolder` key in order to render it properly.\n   *\n   * @param  {Array} environments\n   * @returns {Array}\n   */\n\n\n  _createClass(EnvironmentsStore, [{\n    key: 'storeEnvironments',\n    value: function storeEnvironments() {\n      var environments = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      var filteredEnvironments = environments.map(function (env) {\n        var filtered = {};\n\n        if (env.size > 1) {\n          filtered = Object.assign({}, env, {\n            isFolder: true,\n            folderName: env.name,\n            isOpen: false,\n            children: []\n          });\n        }\n\n        if (env.latest) {\n          filtered = Object.assign(filtered, env, env.latest);\n          delete filtered.latest;\n        } else {\n          filtered = Object.assign(filtered, env);\n        }\n\n        return filtered;\n      });\n\n      this.state.environments = filteredEnvironments;\n\n      return filteredEnvironments;\n    }\n  }, {\n    key: 'setPagination',\n    value: function setPagination() {\n      var pagination = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var normalizedHeaders = gl.utils.normalizeHeaders(pagination);\n      var paginationInformation = gl.utils.parseIntPagination(normalizedHeaders);\n\n      this.state.paginationInformation = paginationInformation;\n      return paginationInformation;\n    }\n\n    /**\n     * Stores the number of available environments.\n     *\n     * @param  {Number} count = 0\n     * @return {Number}\n     */\n\n  }, {\n    key: 'storeAvailableCount',\n    value: function storeAvailableCount() {\n      var count = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      this.state.availableCounter = count;\n      return count;\n    }\n\n    /**\n     * Stores the number of closed environments.\n     *\n     * @param  {Number} count = 0\n     * @return {Number}\n     */\n\n  }, {\n    key: 'storeStoppedCount',\n    value: function storeStoppedCount() {\n      var count = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      this.state.stoppedCounter = count;\n      return count;\n    }\n\n    /**\n      * Toggles folder open property for the given folder.\n      *\n      * @param  {Object} folder\n      * @return {Array}\n      */\n\n  }, {\n    key: 'toggleFolder',\n    value: function toggleFolder(folder) {\n      return this.updateFolder(folder, 'isOpen', !folder.isOpen);\n    }\n\n    /**\n     * Updates the folder with the received environments.\n     *\n     *\n     * @param  {Object} folder       Folder to update\n     * @param  {Array} environments Received environments\n     * @return {Object}\n     */\n\n  }, {\n    key: 'setfolderContent',\n    value: function setfolderContent(folder, environments) {\n      var updatedEnvironments = environments.map(function (env) {\n        var updated = env;\n\n        if (env.latest) {\n          updated = Object.assign({}, env, env.latest);\n          delete updated.latest;\n        } else {\n          updated = env;\n        }\n\n        updated.isChildren = true;\n\n        return updated;\n      });\n\n      return this.updateFolder(folder, 'children', updatedEnvironments);\n    }\n\n    /**\n     * Given a folder a prop and a new value updates the correct folder.\n     *\n     * @param  {Object} folder\n     * @param  {String} prop\n     * @param  {String|Boolean|Object|Array} newValue\n     * @return {Array}\n     */\n\n  }, {\n    key: 'updateFolder',\n    value: function updateFolder(folder, prop, newValue) {\n      var environments = this.state.environments;\n\n      var updatedEnvironments = environments.map(function (env) {\n        var updateEnv = Object.assign({}, env);\n        if (env.isFolder && env.id === folder.id) {\n          updateEnv[prop] = newValue;\n        }\n\n        return updateEnv;\n      });\n\n      this.state.environments = updatedEnvironments;\n\n      return updatedEnvironments;\n    }\n  }]);\n\n  return EnvironmentsStore;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (EnvironmentsStore);\n\n/***/ })\n\n},[\"XJ/8\"]);\n\n\n// WEBPACK FOOTER //\n// environments.9cda46dc2a756ce47719.bundle.js","import Timeago from 'timeago.js';\nimport '../../lib/utils/text_utility';\nimport ActionsComponent from './environment_actions';\nimport ExternalUrlComponent from './environment_external_url';\nimport StopComponent from './environment_stop';\nimport RollbackComponent from './environment_rollback';\nimport TerminalButtonComponent from './environment_terminal_button';\nimport MonitoringButtonComponent from './environment_monitoring';\nimport CommitComponent from '../../vue_shared/components/commit';\nimport eventHub from '../event_hub';\n\n/**\n * Envrionment Item Component\n *\n * Renders a table row for each environment.\n */\nconst timeagoInstance = new Timeago();\n\nexport default {\n  components: {\n    'commit-component': CommitComponent,\n    'actions-component': ActionsComponent,\n    'external-url-component': ExternalUrlComponent,\n    'stop-component': StopComponent,\n    'rollback-component': RollbackComponent,\n    'terminal-button-component': TerminalButtonComponent,\n    'monitoring-button-component': MonitoringButtonComponent,\n  },\n\n  props: {\n    model: {\n      type: Object,\n      required: true,\n      default: () => ({}),\n    },\n\n    canCreateDeployment: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n\n    canReadEnvironment: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n\n    service: {\n      type: Object,\n      required: true,\n    },\n  },\n\n  computed: {\n    /**\n     * Verifies if `last_deployment` key exists in the current Envrionment.\n     * This key is required to render most of the html - this method works has\n     * an helper.\n     *\n     * @returns {Boolean}\n     */\n    hasLastDeploymentKey() {\n      if (this.model &&\n        this.model.last_deployment &&\n        !this.$options.isObjectEmpty(this.model.last_deployment)) {\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * Verifies is the given environment has manual actions.\n     * Used to verify if we should render them or nor.\n     *\n     * @returns {Boolean|Undefined}\n     */\n    hasManualActions() {\n      return this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.manual_actions &&\n        this.model.last_deployment.manual_actions.length > 0;\n    },\n\n    /**\n     * Returns the value of the `stop_action?` key provided in the response.\n     *\n     * @returns {Boolean}\n     */\n    hasStopAction() {\n      return this.model && this.model['stop_action?'];\n    },\n\n    /**\n     * Verifies if the `deployable` key is present in `last_deployment` key.\n     * Used to verify whether we should or not render the rollback partial.\n     *\n     * @returns {Boolean|Undefined}\n     */\n    canRetry() {\n      return this.model &&\n        this.hasLastDeploymentKey &&\n        this.model.last_deployment &&\n        this.model.last_deployment.deployable;\n    },\n\n    /**\n     * Verifies if the date to be shown is present.\n     *\n     * @returns {Boolean|Undefined}\n     */\n    canShowDate() {\n      return this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.deployable &&\n        this.model.last_deployment.deployable !== undefined;\n    },\n\n    /**\n     * Human readable date.\n     *\n     * @returns {String}\n     */\n    createdDate() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.deployable &&\n        this.model.last_deployment.deployable.created_at) {\n        return timeagoInstance.format(this.model.last_deployment.deployable.created_at);\n      }\n      return '';\n    },\n\n    /**\n     * Returns the manual actions with the name parsed.\n     *\n     * @returns {Array.<Object>|Undefined}\n     */\n    manualActions() {\n      if (this.hasManualActions) {\n        return this.model.last_deployment.manual_actions.map((action) => {\n          const parsedAction = {\n            name: gl.text.humanize(action.name),\n            play_path: action.play_path,\n            playable: action.playable,\n          };\n          return parsedAction;\n        });\n      }\n      return [];\n    },\n\n    /**\n     * Builds the string used in the user image alt attribute.\n     *\n     * @returns {String}\n     */\n    userImageAltDescription() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.user &&\n        this.model.last_deployment.user.username) {\n        return `${this.model.last_deployment.user.username}'s avatar'`;\n      }\n      return '';\n    },\n\n    /**\n     * If provided, returns the commit tag.\n     *\n     * @returns {String|Undefined}\n     */\n    commitTag() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.tag) {\n        return this.model.last_deployment.tag;\n      }\n      return undefined;\n    },\n\n    /**\n     * If provided, returns the commit ref.\n     *\n     * @returns {Object|Undefined}\n     */\n    commitRef() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.ref) {\n        return this.model.last_deployment.ref;\n      }\n      return undefined;\n    },\n\n    /**\n     * If provided, returns the commit url.\n     *\n     * @returns {String|Undefined}\n     */\n    commitUrl() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.commit &&\n        this.model.last_deployment.commit.commit_path) {\n        return this.model.last_deployment.commit.commit_path;\n      }\n      return undefined;\n    },\n\n    /**\n     * If provided, returns the commit short sha.\n     *\n     * @returns {String|Undefined}\n     */\n    commitShortSha() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.commit &&\n        this.model.last_deployment.commit.short_id) {\n        return this.model.last_deployment.commit.short_id;\n      }\n      return undefined;\n    },\n\n    /**\n     * If provided, returns the commit title.\n     *\n     * @returns {String|Undefined}\n     */\n    commitTitle() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.commit &&\n        this.model.last_deployment.commit.title) {\n        return this.model.last_deployment.commit.title;\n      }\n      return undefined;\n    },\n\n    /**\n     * If provided, returns the commit tag.\n     *\n     * @returns {Object|Undefined}\n     */\n    commitAuthor() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.commit &&\n        this.model.last_deployment.commit.author) {\n        return this.model.last_deployment.commit.author;\n      }\n\n      return undefined;\n    },\n\n    /**\n     * Verifies if the `retry_path` key is present and returns its value.\n     *\n     * @returns {String|Undefined}\n     */\n    retryUrl() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.deployable &&\n        this.model.last_deployment.deployable.retry_path) {\n        return this.model.last_deployment.deployable.retry_path;\n      }\n      return undefined;\n    },\n\n    /**\n     * Verifies if the `last?` key is present and returns its value.\n     *\n     * @returns {Boolean|Undefined}\n     */\n    isLastDeployment() {\n      return this.model && this.model.last_deployment &&\n        this.model.last_deployment['last?'];\n    },\n\n    /**\n     * Builds the name of the builds needed to display both the name and the id.\n     *\n     * @returns {String}\n     */\n    buildName() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.deployable) {\n        return `${this.model.last_deployment.deployable.name} #${this.model.last_deployment.deployable.id}`;\n      }\n      return '';\n    },\n\n    /**\n     * Builds the needed string to show the internal id.\n     *\n     * @returns {String}\n     */\n    deploymentInternalId() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.iid) {\n        return `#${this.model.last_deployment.iid}`;\n      }\n      return '';\n    },\n\n    /**\n     * Verifies if the user object is present under last_deployment object.\n     *\n     * @returns {Boolean}\n     */\n    deploymentHasUser() {\n      return this.model &&\n        !this.$options.isObjectEmpty(this.model.last_deployment) &&\n        !this.$options.isObjectEmpty(this.model.last_deployment.user);\n    },\n\n    /**\n     * Returns the user object nested with the last_deployment object.\n     * Used to render the template.\n     *\n     * @returns {Object}\n     */\n    deploymentUser() {\n      if (this.model &&\n        !this.$options.isObjectEmpty(this.model.last_deployment) &&\n        !this.$options.isObjectEmpty(this.model.last_deployment.user)) {\n        return this.model.last_deployment.user;\n      }\n      return {};\n    },\n\n    /**\n     * Verifies if the build name column should be rendered by verifing\n     * if all the information needed is present\n     * and if the environment is not a folder.\n     *\n     * @returns {Boolean}\n     */\n    shouldRenderBuildName() {\n      return !this.model.isFolder &&\n        !this.$options.isObjectEmpty(this.model.last_deployment) &&\n        !this.$options.isObjectEmpty(this.model.last_deployment.deployable);\n    },\n\n    /**\n     * Verifies the presence of all the keys needed to render the buil_path.\n     *\n     * @return {String}\n     */\n    buildPath() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.deployable &&\n        this.model.last_deployment.deployable.build_path) {\n        return this.model.last_deployment.deployable.build_path;\n      }\n\n      return '';\n    },\n\n    /**\n     * Verifies the presence of all the keys needed to render the external_url.\n     *\n     * @return {String}\n     */\n    externalURL() {\n      if (this.model && this.model.external_url) {\n        return this.model.external_url;\n      }\n\n      return '';\n    },\n\n    /**\n     * Verifies if deplyment internal ID should be rendered by verifing\n     * if all the information needed is present\n     * and if the environment is not a folder.\n     *\n     * @returns {Boolean}\n     */\n    shouldRenderDeploymentID() {\n      return !this.model.isFolder &&\n        !this.$options.isObjectEmpty(this.model.last_deployment) &&\n        this.model.last_deployment.iid !== undefined;\n    },\n\n    environmentPath() {\n      if (this.model && this.model.environment_path) {\n        return this.model.environment_path;\n      }\n\n      return '';\n    },\n\n    monitoringUrl() {\n      if (this.model && this.model.metrics_path) {\n        return this.model.metrics_path;\n      }\n\n      return '';\n    },\n\n    /**\n     * Constructs folder URL based on the current location and the folder id.\n     *\n     * @return {String}\n     */\n    folderUrl() {\n      return `${window.location.pathname}/folders/${this.model.folderName}`;\n    },\n  },\n\n  /**\n   * Helper to verify if certain given object are empty.\n   * Should be replaced by lodash _.isEmpty - https://lodash.com/docs/4.17.2#isEmpty\n   * @param  {Object} object\n   * @returns {Bollean}\n   */\n  isObjectEmpty(object) {\n    for (const key in object) { // eslint-disable-line\n      if (hasOwnProperty.call(object, key)) {\n        return false;\n      }\n    }\n    return true;\n  },\n\n  methods: {\n    onClickFolder() {\n      eventHub.$emit('toggleFolder', this.model, this.folderUrl);\n    },\n  },\n\n  template: `\n    <tr :class=\"{ 'js-child-row': model.isChildren }\">\n      <td>\n        <a v-if=\"!model.isFolder\"\n          class=\"environment-name\"\n          :class=\"{ 'prepend-left-default': model.isChildren }\"\n          :href=\"environmentPath\">\n          {{model.name}}\n        </a>\n        <span v-else\n          class=\"folder-name\"\n          @click=\"onClickFolder\"\n          role=\"button\">\n\n          <span class=\"folder-icon\">\n            <i\n              v-show=\"model.isOpen\"\n              class=\"fa fa-caret-down\"\n              aria-hidden=\"true\" />\n            <i\n              v-show=\"!model.isOpen\"\n              class=\"fa fa-caret-right\"\n              aria-hidden=\"true\"/>\n          </span>\n\n          <span class=\"folder-icon\">\n            <i class=\"fa fa-folder\" aria-hidden=\"true\"></i>\n          </span>\n\n          <span>\n            {{model.folderName}}\n          </span>\n\n          <span class=\"badge\">\n            {{model.size}}\n          </span>\n        </span>\n      </td>\n\n      <td class=\"deployment-column\">\n        <span v-if=\"shouldRenderDeploymentID\">\n          {{deploymentInternalId}}\n        </span>\n\n        <span v-if=\"!model.isFolder && deploymentHasUser\">\n          by\n          <a :href=\"deploymentUser.web_url\" class=\"js-deploy-user-container\">\n            <img class=\"avatar has-tooltip s20\"\n              :src=\"deploymentUser.avatar_url\"\n              :alt=\"userImageAltDescription\"\n              :title=\"deploymentUser.username\" />\n          </a>\n        </span>\n      </td>\n\n      <td class=\"environments-build-cell\">\n        <a v-if=\"shouldRenderBuildName\"\n          class=\"build-link\"\n          :href=\"buildPath\">\n          {{buildName}}\n        </a>\n      </td>\n\n      <td>\n        <div v-if=\"!model.isFolder && hasLastDeploymentKey\" class=\"js-commit-component\">\n          <commit-component\n            :tag=\"commitTag\"\n            :commit-ref=\"commitRef\"\n            :commit-url=\"commitUrl\"\n            :short-sha=\"commitShortSha\"\n            :title=\"commitTitle\"\n            :author=\"commitAuthor\"/>\n        </div>\n        <p v-if=\"!model.isFolder && !hasLastDeploymentKey\" class=\"commit-title\">\n          No deployments yet\n        </p>\n      </td>\n\n      <td>\n        <span v-if=\"!model.isFolder && canShowDate\"\n          class=\"environment-created-date-timeago\">\n          {{createdDate}}\n        </span>\n      </td>\n\n      <td class=\"environments-actions\">\n        <div v-if=\"!model.isFolder\" class=\"btn-group pull-right\" role=\"group\">\n          <actions-component v-if=\"hasManualActions && canCreateDeployment\"\n            :service=\"service\"\n            :actions=\"manualActions\"/>\n\n          <external-url-component v-if=\"externalURL && canReadEnvironment\"\n            :external-url=\"externalURL\"/>\n\n          <monitoring-button-component v-if=\"monitoringUrl && canReadEnvironment\"\n            :monitoring-url=\"monitoringUrl\"/>\n\n          <terminal-button-component v-if=\"model && model.terminal_path\"\n            :terminal-path=\"model.terminal_path\"/>\n\n          <stop-component v-if=\"hasStopAction && canCreateDeployment\"\n            :stop-url=\"model.stop_path\"\n            :service=\"service\"/>\n\n          <rollback-component v-if=\"canRetry && canCreateDeployment\"\n            :is-last-deployment=\"isLastDeployment\"\n            :retry-url=\"retryUrl\"\n            :service=\"service\"/>\n        </div>\n      </td>\n    </tr>\n  `,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./environments/components/environment_item.js","/**\n * Renders the external url link in environments table.\n */\nexport default {\n  props: {\n    externalUrl: {\n      type: String,\n      default: '',\n    },\n  },\n\n  computed: {\n    title() {\n      return 'Open';\n    },\n  },\n\n  template: `\n    <a\n      class=\"btn external-url has-tooltip\"\n      data-container=\"body\"\n      :href=\"externalUrl\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer nofollow\"\n      :title=\"title\"\n      :aria-label=\"title\">\n      <i class=\"fa fa-external-link\" aria-hidden=\"true\"></i>\n    </a>\n  `,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./environments/components/environment_external_url.js","/* global Flash */\n/* eslint-disable no-new */\n/**\n * Renders Rollback or Re deploy button in environments table depending\n * of the provided property `isLastDeployment`.\n *\n * Makes a post request when the button is clicked.\n */\nimport eventHub from '../event_hub';\n\nexport default {\n  props: {\n    retryUrl: {\n      type: String,\n      default: '',\n    },\n\n    isLastDeployment: {\n      type: Boolean,\n      default: true,\n    },\n\n    service: {\n      type: Object,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      isLoading: false,\n    };\n  },\n\n  methods: {\n    onClick() {\n      this.isLoading = true;\n\n      $(this.$el).tooltip('destroy');\n\n      this.service.postAction(this.retryUrl)\n      .then(() => {\n        this.isLoading = false;\n        eventHub.$emit('refreshEnvironments');\n      })\n      .catch(() => {\n        this.isLoading = false;\n        new Flash('An error occured while making the request.');\n      });\n    },\n  },\n\n  template: `\n    <button type=\"button\"\n      class=\"btn\"\n      @click=\"onClick\"\n      :disabled=\"isLoading\">\n\n      <span v-if=\"isLastDeployment\">\n        Re-deploy\n      </span>\n      <span v-else>\n        Rollback\n      </span>\n\n      <i v-if=\"isLoading\" class=\"fa fa-spinner fa-spin\" aria-hidden=\"true\"></i>\n    </button>\n  `,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./environments/components/environment_rollback.js","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 10 11\\\" class=\\\"icon-play\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"m9.283 6.47l-7.564 4.254c-.949.534-1.719.266-1.719-.576v-9.292c0-.852.756-1.117 1.719-.576l7.564 4.254c.949.534.963 1.392 0 1.934\\\"/></svg>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /var/cache/omnibus/src/gitlab-rails/app/views/shared/icons/_icon_play.svg\n// module id = LIwm\n// module chunks = 3 4 7 8","/**\n * Renders the Monitoring (Metrics) link in environments table.\n */\nexport default {\n  props: {\n    monitoringUrl: {\n      type: String,\n      default: '',\n      required: true,\n    },\n  },\n\n  computed: {\n    title() {\n      return 'Monitoring';\n    },\n  },\n\n  template: `\n    <a\n      class=\"btn monitoring-url has-tooltip\"\n      data-container=\"body\"\n      :href=\"monitoringUrl\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer nofollow\"\n      :title=\"title\"\n      :aria-label=\"title\">\n      <i class=\"fa fa-area-chart\" aria-hidden=\"true\"></i>\n    </a>\n  `,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./environments/components/environment_monitoring.js","/**\n * Renders a terminal button to open a web terminal.\n * Used in environments table.\n */\nimport terminalIconSvg from 'icons/_icon_terminal.svg';\n\nexport default {\n  props: {\n    terminalPath: {\n      type: String,\n      required: false,\n      default: '',\n    },\n  },\n\n  data() {\n    return {\n      terminalIconSvg,\n    };\n  },\n\n  computed: {\n    title() {\n      return 'Terminal';\n    },\n  },\n\n  template: `\n    <a class=\"btn terminal-button has-tooltip\"\n      data-container=\"body\"\n      :title=\"title\"\n      :aria-label=\"title\"\n      :href=\"terminalPath\">\n      ${terminalIconSvg}\n    </a>\n  `,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./environments/components/environment_terminal_button.js","/* global Flash */\n/* eslint-disable no-new */\n\nimport playIconSvg from 'icons/_icon_play.svg';\nimport eventHub from '../event_hub';\n\nexport default {\n  props: {\n    actions: {\n      type: Array,\n      required: false,\n      default: () => [],\n    },\n\n    service: {\n      type: Object,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      playIconSvg,\n      isLoading: false,\n    };\n  },\n\n  computed: {\n    title() {\n      return 'Deploy to...';\n    },\n  },\n\n  methods: {\n    onClickAction(endpoint) {\n      this.isLoading = true;\n\n      $(this.$refs.tooltip).tooltip('destroy');\n\n      this.service.postAction(endpoint)\n      .then(() => {\n        this.isLoading = false;\n        eventHub.$emit('refreshEnvironments');\n      })\n      .catch(() => {\n        this.isLoading = false;\n        new Flash('An error occured while making the request.');\n      });\n    },\n\n    isActionDisabled(action) {\n      if (action.playable === undefined) {\n        return false;\n      }\n\n      return !action.playable;\n    },\n  },\n\n  template: `\n    <div class=\"btn-group\" role=\"group\">\n      <button\n        type=\"button\"\n        class=\"dropdown btn btn-default dropdown-new js-dropdown-play-icon-container has-tooltip\"\n        data-container=\"body\"\n        data-toggle=\"dropdown\"\n        ref=\"tooltip\"\n        :title=\"title\"\n        :aria-label=\"title\"\n        :disabled=\"isLoading\">\n        <span>\n          <span v-html=\"playIconSvg\"></span>\n          <i\n            class=\"fa fa-caret-down\"\n            aria-hidden=\"true\"/>\n          <i\n            v-if=\"isLoading\"\n            class=\"fa fa-spinner fa-spin\"\n            aria-hidden=\"true\"/>\n        </span>\n      </button>\n\n      <ul class=\"dropdown-menu dropdown-menu-align-right\">\n        <li v-for=\"action in actions\">\n          <button\n            type=\"button\"\n            class=\"js-manual-action-link no-btn btn\"\n            @click=\"onClickAction(action.play_path)\"\n            :class=\"{ 'disabled': isActionDisabled(action) }\"\n            :disabled=\"isActionDisabled(action)\">\n            ${playIconSvg}\n            <span>\n              {{action.name}}\n            </span>\n          </button>\n        </li>\n      </ul>\n  </div>\n  `,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./environments/components/environment_actions.js","import Vue from 'vue';\n\nexport default new Vue();\n\n\n\n// WEBPACK FOOTER //\n// ./environments/event_hub.js","module.exports = \"<svg width=\\\"19\\\" height=\\\"14\\\" viewBox=\\\"0 0 19 14\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><rect fill=\\\"#848484\\\" x=\\\"7.2\\\" y=\\\"9.25\\\" width=\\\"6.46\\\" height=\\\"1.5\\\" rx=\\\".5\\\"/><path d=\\\"M5.851 7.016L3.81 9.103a.503.503 0 0 0 .017.709l.35.334c.207.198.524.191.717-.006l2.687-2.748a.493.493 0 0 0 .137-.376.493.493 0 0 0-.137-.376L4.894 3.892a.507.507 0 0 0-.717-.006l-.35.334a.503.503 0 0 0-.017.709L5.85 7.016z\\\"/><path d=\\\"M1.25 11.497c0 .691.562 1.253 1.253 1.253h13.994c.694 0 1.253-.56 1.253-1.253V2.503c0-.691-.562-1.253-1.253-1.253H2.503c-.694 0-1.253.56-1.253 1.253v8.994zM2.503 0h13.994A2.504 2.504 0 0 1 19 2.503v8.994A2.501 2.501 0 0 1 16.497 14H2.503A2.504 2.504 0 0 1 0 11.497V2.503A2.501 2.501 0 0 1 2.503 0z\\\"/></svg>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /var/cache/omnibus/src/gitlab-rails/app/views/shared/icons/_icon_terminal.svg\n// module id = WEra\n// module chunks = 7 8","import EnvironmentsComponent from './components/environment';\n\n$(() => {\n  window.gl = window.gl || {};\n\n  if (gl.EnvironmentsListApp) {\n    gl.EnvironmentsListApp.$destroy(true);\n  }\n\n  gl.EnvironmentsListApp = new EnvironmentsComponent({\n    el: document.querySelector('#environments-list-view'),\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./environments/environments_bundle.js","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 36 18\\\" enable-background=\\\"new 0 0 36 18\\\"><path d=\\\"m34 7h-7.2c-.9-4-4.5-7-8.8-7s-7.9 3-8.8 7h-7.2c-1.1 0-2 .9-2 2 0 1.1.9 2 2 2h7.2c.9 4 4.5 7 8.8 7s7.9-3 8.8-7h7.2c1.1 0 2-.9 2-2 0-1.1-.9-2-2-2m-16 7c-2.8 0-5-2.2-5-5s2.2-5 5-5 5 2.2 5 5-2.2 5-5 5\\\"/></svg>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /var/cache/omnibus/src/gitlab-rails/app/views/shared/icons/_icon_commit.svg\n// module id = ZmZM\n// module chunks = 3 4 7 8","/**\n * Render environments table.\n */\nimport EnvironmentTableRowComponent from './environment_item';\n\nexport default {\n  components: {\n    'environment-item': EnvironmentTableRowComponent,\n  },\n\n  props: {\n    environments: {\n      type: Array,\n      required: true,\n      default: () => ([]),\n    },\n\n    canReadEnvironment: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n\n    canCreateDeployment: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n\n    service: {\n      type: Object,\n      required: true,\n    },\n\n    isLoadingFolderContent: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n  },\n\n  methods: {\n    folderUrl(model) {\n      return `${window.location.pathname}/folders/${model.folderName}`;\n    },\n  },\n\n  template: `\n    <table class=\"table ci-table\">\n      <thead>\n        <tr>\n          <th class=\"environments-name\">Environment</th>\n          <th class=\"environments-deploy\">Last deployment</th>\n          <th class=\"environments-build\">Job</th>\n          <th class=\"environments-commit\">Commit</th>\n          <th class=\"environments-date\">Updated</th>\n          <th class=\"environments-actions\"></th>\n        </tr>\n      </thead>\n      <tbody>\n        <template v-for=\"model in environments\"\n          v-bind:model=\"model\">\n          <tr is=\"environment-item\"\n            :model=\"model\"\n            :can-create-deployment=\"canCreateDeployment\"\n            :can-read-environment=\"canReadEnvironment\"\n            :service=\"service\"></tr>\n\n          <template v-if=\"model.isFolder && model.isOpen && model.children && model.children.length > 0\">\n            <tr v-if=\"isLoadingFolderContent\">\n              <td colspan=\"6\" class=\"text-center\">\n                <i class=\"fa fa-spin fa-spinner fa-2x\" aria-hidden=\"true\"/>\n              </td>\n            </tr>\n\n            <template v-else>\n              <tr is=\"environment-item\"\n                v-for=\"children in model.children\"\n                :model=\"children\"\n                :can-create-deployment=\"canCreateDeployment\"\n                :can-read-environment=\"canReadEnvironment\"\n                :service=\"service\"></tr>\n\n              <tr>\n                <td colspan=\"6\" class=\"text-center\">\n                  <a :href=\"folderUrl(model)\" class=\"btn btn-default\">\n                    Show all\n                  </a>\n                </td>\n              </tr>\n            </template>\n          </template>\n        </template>\n      </tbody>\n    </table>\n  `,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./environments/components/environments_table.js","/* global Flash */\n/* eslint-disable no-new, no-alert */\n/**\n * Renders the stop \"button\" that allows stop an environment.\n * Used in environments table.\n */\nimport eventHub from '../event_hub';\n\nexport default {\n  props: {\n    stopUrl: {\n      type: String,\n      default: '',\n    },\n\n    service: {\n      type: Object,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      isLoading: false,\n    };\n  },\n\n  computed: {\n    title() {\n      return 'Stop';\n    },\n  },\n\n  methods: {\n    onClick() {\n      if (confirm('Are you sure you want to stop this environment?')) {\n        this.isLoading = true;\n\n        $(this.$el).tooltip('destroy');\n\n        this.service.postAction(this.retryUrl)\n        .then(() => {\n          this.isLoading = false;\n          eventHub.$emit('refreshEnvironments');\n        })\n        .catch(() => {\n          this.isLoading = false;\n          new Flash('An error occured while making the request.', 'alert');\n        });\n      }\n    },\n  },\n\n  template: `\n    <button type=\"button\"\n      class=\"btn stop-env-link has-tooltip\"\n      data-container=\"body\"\n      @click=\"onClick\"\n      :disabled=\"isLoading\"\n      :title=\"title\"\n      :aria-label=\"title\">\n      <i class=\"fa fa-stop stop-env-icon\" aria-hidden=\"true\"></i>\n      <i v-if=\"isLoading\" class=\"fa fa-spinner fa-spin\" aria-hidden=\"true\"></i>\n    </button>\n  `,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./environments/components/environment_stop.js","/* eslint-disable class-methods-use-this */\nimport Vue from 'vue';\nimport VueResource from 'vue-resource';\n\nVue.use(VueResource);\n\nexport default class EnvironmentsService {\n  constructor(endpoint) {\n    this.environments = Vue.resource(endpoint);\n    this.folderResults = 3;\n  }\n\n  get(scope, page) {\n    return this.environments.get({ scope, page });\n  }\n\n  postAction(endpoint) {\n    return Vue.http.post(endpoint, {}, { emulateJSON: true });\n  }\n\n  getFolderContent(folderUrl) {\n    return Vue.http.get(`${folderUrl}.json?per_page=${this.folderResults}`);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./environments/services/environments_service.js","/* eslint-disable no-new */\n/* global Flash */\nimport Vue from 'vue';\nimport EnvironmentsService from '../services/environments_service';\nimport EnvironmentTable from './environments_table';\nimport EnvironmentsStore from '../stores/environments_store';\nimport TablePaginationComponent from '../../vue_shared/components/table_pagination';\nimport '../../lib/utils/common_utils';\nimport eventHub from '../event_hub';\n\nexport default Vue.component('environment-component', {\n\n  components: {\n    'environment-table': EnvironmentTable,\n    'table-pagination': TablePaginationComponent,\n  },\n\n  data() {\n    const environmentsData = document.querySelector('#environments-list-view').dataset;\n    const store = new EnvironmentsStore();\n\n    return {\n      store,\n      state: store.state,\n      visibility: 'available',\n      isLoading: false,\n      isLoadingFolderContent: false,\n      cssContainerClass: environmentsData.cssClass,\n      endpoint: environmentsData.environmentsDataEndpoint,\n      canCreateDeployment: environmentsData.canCreateDeployment,\n      canReadEnvironment: environmentsData.canReadEnvironment,\n      canCreateEnvironment: environmentsData.canCreateEnvironment,\n      projectEnvironmentsPath: environmentsData.projectEnvironmentsPath,\n      projectStoppedEnvironmentsPath: environmentsData.projectStoppedEnvironmentsPath,\n      newEnvironmentPath: environmentsData.newEnvironmentPath,\n      helpPagePath: environmentsData.helpPagePath,\n\n      // Pagination Properties,\n      paginationInformation: {},\n      pageNumber: 1,\n    };\n  },\n\n  computed: {\n    scope() {\n      return gl.utils.getParameterByName('scope');\n    },\n\n    canReadEnvironmentParsed() {\n      return gl.utils.convertPermissionToBoolean(this.canReadEnvironment);\n    },\n\n    canCreateDeploymentParsed() {\n      return gl.utils.convertPermissionToBoolean(this.canCreateDeployment);\n    },\n\n    canCreateEnvironmentParsed() {\n      return gl.utils.convertPermissionToBoolean(this.canCreateEnvironment);\n    },\n  },\n\n  /**\n   * Fetches all the environments and stores them.\n   * Toggles loading property.\n   */\n  created() {\n    this.service = new EnvironmentsService(this.endpoint);\n\n    this.fetchEnvironments();\n\n    eventHub.$on('refreshEnvironments', this.fetchEnvironments);\n    eventHub.$on('toggleFolder', this.toggleFolder);\n  },\n\n  beforeDestroyed() {\n    eventHub.$off('refreshEnvironments');\n    eventHub.$off('toggleFolder');\n  },\n\n  methods: {\n    toggleFolder(folder, folderUrl) {\n      this.store.toggleFolder(folder);\n\n      if (!folder.isOpen) {\n        this.fetchChildEnvironments(folder, folderUrl);\n      }\n    },\n\n    /**\n     * Will change the page number and update the URL.\n     *\n     * @param  {Number} pageNumber desired page to go to.\n     * @return {String}\n     */\n    changePage(pageNumber) {\n      const param = gl.utils.setParamInURL('page', pageNumber);\n\n      gl.utils.visitUrl(param);\n      return param;\n    },\n\n    fetchEnvironments() {\n      const scope = gl.utils.getParameterByName('scope') || this.visibility;\n      const pageNumber = gl.utils.getParameterByName('page') || this.pageNumber;\n\n      this.isLoading = true;\n\n      return this.service.get(scope, pageNumber)\n        .then(resp => ({\n          headers: resp.headers,\n          body: resp.json(),\n        }))\n        .then((response) => {\n          this.store.storeAvailableCount(response.body.available_count);\n          this.store.storeStoppedCount(response.body.stopped_count);\n          this.store.storeEnvironments(response.body.environments);\n          this.store.setPagination(response.headers);\n        })\n        .then(() => {\n          this.isLoading = false;\n        })\n        .catch(() => {\n          this.isLoading = false;\n          new Flash('An error occurred while fetching the environments.');\n        });\n    },\n\n    fetchChildEnvironments(folder, folderUrl) {\n      this.isLoadingFolderContent = true;\n\n      this.service.getFolderContent(folderUrl)\n        .then(resp => resp.json())\n        .then((response) => {\n          this.store.setfolderContent(folder, response.environments);\n          this.isLoadingFolderContent = false;\n        })\n        .catch(() => {\n          this.isLoadingFolderContent = false;\n          new Flash('An error occurred while fetching the environments.');\n        });\n    },\n  },\n\n  template: `\n    <div :class=\"cssContainerClass\">\n      <div class=\"top-area\">\n        <ul v-if=\"!isLoading\" class=\"nav-links\">\n          <li v-bind:class=\"{ 'active': scope === null || scope === 'available' }\">\n            <a :href=\"projectEnvironmentsPath\">\n              Available\n              <span class=\"badge js-available-environments-count\">\n                {{state.availableCounter}}\n              </span>\n            </a>\n          </li>\n          <li v-bind:class=\"{ 'active' : scope === 'stopped' }\">\n            <a :href=\"projectStoppedEnvironmentsPath\">\n              Stopped\n              <span class=\"badge js-stopped-environments-count\">\n                {{state.stoppedCounter}}\n              </span>\n            </a>\n          </li>\n        </ul>\n        <div v-if=\"canCreateEnvironmentParsed && !isLoading\" class=\"nav-controls\">\n          <a :href=\"newEnvironmentPath\" class=\"btn btn-create\">\n            New environment\n          </a>\n        </div>\n      </div>\n\n      <div class=\"content-list environments-container\">\n        <div class=\"environments-list-loading text-center\" v-if=\"isLoading\">\n          <i class=\"fa fa-spinner fa-spin\" aria-hidden=\"true\"></i>\n        </div>\n\n        <div class=\"blank-state blank-state-no-icon\"\n          v-if=\"!isLoading && state.environments.length === 0\">\n          <h2 class=\"blank-state-title js-blank-state-title\">\n            You don't have any environments right now.\n          </h2>\n          <p class=\"blank-state-text\">\n            Environments are places where code gets deployed, such as staging or production.\n            <br />\n            <a :href=\"helpPagePath\">\n              Read more about environments\n            </a>\n          </p>\n\n          <a v-if=\"canCreateEnvironmentParsed\"\n            :href=\"newEnvironmentPath\"\n            class=\"btn btn-create js-new-environment-button\">\n            New Environment\n          </a>\n        </div>\n\n        <div class=\"table-holder\"\n          v-if=\"!isLoading && state.environments.length > 0\">\n\n          <environment-table\n            :environments=\"state.environments\"\n            :can-create-deployment=\"canCreateDeploymentParsed\"\n            :can-read-environment=\"canReadEnvironmentParsed\"\n            :service=\"service\"\n            :is-loading-folder-content=\"isLoadingFolderContent\" />\n        </div>\n\n        <table-pagination v-if=\"state.paginationInformation && state.paginationInformation.totalPages > 1\"\n          :change=\"changePage\"\n          :pageInfo=\"state.paginationInformation\">\n        </table-pagination>\n      </div>\n    </div>\n  `,\n});\n\n\n\n// WEBPACK FOOTER //\n// ./environments/components/environment.js","import '~/lib/utils/common_utils';\n/**\n * Environments Store.\n *\n * Stores received environments, count of stopped environments and count of\n * available environments.\n */\nexport default class EnvironmentsStore {\n  constructor() {\n    this.state = {};\n    this.state.environments = [];\n    this.state.stoppedCounter = 0;\n    this.state.availableCounter = 0;\n    this.state.paginationInformation = {};\n\n    return this;\n  }\n\n  /**\n   *\n   * Stores the received environments.\n   *\n   * In the main environments endpoint, each environment has the following schema\n   * { name: String, size: Number, latest: Object }\n   * In the endpoint to retrieve environments from each folder, the environment does\n   * not have the `latest` key and the data is all in the root level.\n   * To avoid doing this check in the view, we store both cases the same by extracting\n   * what is inside the `latest` key.\n   *\n   * If the `size` is bigger than 1, it means it should be rendered as a folder.\n   * In those cases we add `isFolder` key in order to render it properly.\n   *\n   * @param  {Array} environments\n   * @returns {Array}\n   */\n  storeEnvironments(environments = []) {\n    const filteredEnvironments = environments.map((env) => {\n      let filtered = {};\n\n      if (env.size > 1) {\n        filtered = Object.assign({}, env, {\n          isFolder: true,\n          folderName: env.name,\n          isOpen: false,\n          children: [],\n        });\n      }\n\n      if (env.latest) {\n        filtered = Object.assign(filtered, env, env.latest);\n        delete filtered.latest;\n      } else {\n        filtered = Object.assign(filtered, env);\n      }\n\n      return filtered;\n    });\n\n    this.state.environments = filteredEnvironments;\n\n    return filteredEnvironments;\n  }\n\n  setPagination(pagination = {}) {\n    const normalizedHeaders = gl.utils.normalizeHeaders(pagination);\n    const paginationInformation = gl.utils.parseIntPagination(normalizedHeaders);\n\n    this.state.paginationInformation = paginationInformation;\n    return paginationInformation;\n  }\n\n  /**\n   * Stores the number of available environments.\n   *\n   * @param  {Number} count = 0\n   * @return {Number}\n   */\n  storeAvailableCount(count = 0) {\n    this.state.availableCounter = count;\n    return count;\n  }\n\n  /**\n   * Stores the number of closed environments.\n   *\n   * @param  {Number} count = 0\n   * @return {Number}\n   */\n  storeStoppedCount(count = 0) {\n    this.state.stoppedCounter = count;\n    return count;\n  }\n\n  /**\n    * Toggles folder open property for the given folder.\n    *\n    * @param  {Object} folder\n    * @return {Array}\n    */\n  toggleFolder(folder) {\n    return this.updateFolder(folder, 'isOpen', !folder.isOpen);\n  }\n\n  /**\n   * Updates the folder with the received environments.\n   *\n   *\n   * @param  {Object} folder       Folder to update\n   * @param  {Array} environments Received environments\n   * @return {Object}\n   */\n  setfolderContent(folder, environments) {\n    const updatedEnvironments = environments.map((env) => {\n      let updated = env;\n\n      if (env.latest) {\n        updated = Object.assign({}, env, env.latest);\n        delete updated.latest;\n      } else {\n        updated = env;\n      }\n\n      updated.isChildren = true;\n\n      return updated;\n    });\n\n    return this.updateFolder(folder, 'children', updatedEnvironments);\n  }\n\n  /**\n   * Given a folder a prop and a new value updates the correct folder.\n   *\n   * @param  {Object} folder\n   * @param  {String} prop\n   * @param  {String|Boolean|Object|Array} newValue\n   * @return {Array}\n   */\n  updateFolder(folder, prop, newValue) {\n    const environments = this.state.environments;\n\n    const updatedEnvironments = environments.map((env) => {\n      const updateEnv = Object.assign({}, env);\n      if (env.isFolder && env.id === folder.id) {\n        updateEnv[prop] = newValue;\n      }\n\n      return updateEnv;\n    });\n\n    this.state.environments = updatedEnvironments;\n\n    return updatedEnvironments;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./environments/stores/environments_store.js"],"sourceRoot":""}