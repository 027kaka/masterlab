webpackJsonp([5],{"1kZT":function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=s("JTVE"),n=s("C5Ex"),o=s("rP25");s("unKI"),s("C5Ex"),function(){var t=gl.issueBoards.BoardsStore;window.gl=window.gl||{},window.gl.issueBoards=window.gl.issueBoards||{},gl.issueBoards.Board=i.default.extend({template:"#js-board-template",components:{boardList:n.default,"board-delete":gl.issueBoards.BoardDelete,boardBlankState:o.a},props:{list:Object,disabled:Boolean,issueLinkBase:String,rootPath:String},data:function(){return{detailIssue:t.detail,filter:t.filter}},watch:{filter:{handler:function(){this.list.page=1,this.list.getIssues(!0)},deep:!0},detailIssue:{handler:function(){if(Object.keys(this.detailIssue.issue).length){if(this.list.findIssue(this.detailIssue.issue.id)){var t=this.$el.offsetLeft,s=document.querySelectorAll(".boards-list")[0],i=s.scrollLeft-t,n=t+this.$el.offsetWidth;window.innerWidth>768&&s.classList.contains("is-compact")?n-=s.offsetWidth-290:n-=s.offsetWidth,n-s.scrollLeft>0?e(s).animate({scrollLeft:n},this.sortableOptions.animation):i>0&&e(s).animate({scrollLeft:t},this.sortableOptions.animation)}}},deep:!0}},methods:{showNewIssueForm:function(){this.$refs["board-list"].showIssueForm=!this.$refs["board-list"].showIssueForm}},mounted:function(){var e=this;this.sortableOptions=gl.issueBoards.getBoardSortableDefaultOptions({disabled:this.disabled,group:"boards",draggable:".is-draggable",handle:".js-board-handle",onEnd:function(s){if(gl.issueBoards.onEnd(),void 0!==s.newIndex&&s.oldIndex!==s.newIndex){var i=e.sortable.toArray(),n=t.findList("id",parseInt(s.item.dataset.id,10));e.$nextTick(function(){t.moveList(n,i)})}}}),this.sortable=Sortable.create(this.$el.parentNode,this.sortableOptions)}})}()}).call(t,s("lwLq"))},"3FuG":function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=s("JTVE");s("IOf9"),function(){var t=gl.issueBoards.BoardsStore;window.gl=window.gl||{},window.gl.issueBoards=window.gl.issueBoards||{},gl.issueBoards.BoardSidebar=i.default.extend({props:{currentUser:Object},data:function(){return{detail:t.detail,issue:{},list:{}}},computed:{showSidebar:function(){return Object.keys(this.issue).length}},watch:{detail:{handler:function(){this.issue.id!==this.detail.issue.id&&e(".js-issue-board-sidebar",this.$el).each(function(t,s){e(s).data("glDropdown").clearMenu()}),this.issue=this.detail.issue,this.list=this.detail.list},deep:!0},issue:function(){this.showSidebar&&this.$nextTick(function(){e(".right-sidebar").getNiceScroll(0).doScrollTop(0,0),e(".right-sidebar").getNiceScroll().resize()})}},methods:{closeSidebar:function(){this.detail.issue={}}},mounted:function(){new IssuableContext(this.currentUser),new MilestoneSelect,new gl.DueDateSelectors,new LabelsSelect,new Sidebar,gl.Subscription.bindAll(".subscription")},components:{removeBtn:gl.issueBoards.RemoveIssueBtn}})}()}).call(t,s("lwLq"))},"9/oB":function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),o=document,a=function(){function e(){i(this,e)}return n(e,[{key:"container",set:function(e){o=e},get:function(){return o}}]),e}();t.a=new a},"9rP8":function(e,t,s){"use strict";(function(e){var i=s("p52B"),n=gl.issueBoards.BoardsStore;t.a={name:"BoardNewIssue",props:{list:Object},data:function(){return{title:"",error:!1}},methods:{submit:function(t){var s=this;if(t.preventDefault(),""!==this.title.trim()){this.error=!1;var i=this.list.label?[this.list.label]:[],o=new ListIssue({title:this.title,labels:i,subscribed:!0});this.list.newIssue(o).then(function(){e(s.$refs.submitButton).enable(),n.detail.issue=o,n.detail.list=s.list}).catch(function(){e(s.$refs.submitButton).enable(),s.list.removeIssue(o),s.error=!0}),this.cancel()}},cancel:function(){this.title="",i.a.$emit("hide-issue-form-"+this.list.id)}},mounted:function(){this.$refs.input.focus()},template:'\n    <div class="card board-new-issue-form">\n      <form @submit="submit($event)">\n        <div class="flash-container"\n          v-if="error">\n          <div class="flash-alert">\n            An error occured. Please try again.\n          </div>\n        </div>\n        <label class="label-light"\n          :for="list.id + \'-title\'">\n          Title\n        </label>\n        <input class="form-control"\n          type="text"\n          v-model="title"\n          ref="input"\n          :id="list.id + \'-title\'" />\n        <div class="clearfix prepend-top-10">\n          <button class="btn btn-success pull-left"\n            type="submit"\n            :disabled="title === \'\'"\n            ref="submit-button">\n            Submit issue\n          </button>\n          <button class="btn btn-default pull-right"\n            type="button"\n            @click="cancel">\n            Cancel\n          </button>\n        </div>\n      </form>\n    </div>\n  '}}).call(t,s("lwLq"))},AN7F:function(e,t,s){"use strict";t.a=function(e,t){return e.split("&").reduce(function(e,t){if(""===t)return e;var s=e,i=t.split("="),n=i[0].replace("[]",""),o=i[0].indexOf("[]"),a=decodeURIComponent(i[1]).replace(/\+/g," ");return-1!==o?(s[n]||(s[n]=[]),s[n].push(a)):s[n]=a,s},t)}},AX9H:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("JTVE"),n=s("rFKb");s("EVjf"),function(){var e=gl.issueBoards.ModalStore;gl.issueBoards.ModalHeader=i.default.extend({mixins:[gl.issueBoards.ModalMixins],props:{projectId:{type:Number,required:!0},milestonePath:{type:String,required:!0},labelPath:{type:String,required:!0}},data:function(){return e.store},computed:{selectAllText:function(){return e.selectedCount()!==this.issues.length||0===this.issues.length?"Select all":"Deselect all"},showSearch:function(){return"all"===this.activeTab&&!this.loading&&this.issuesCount>0}},methods:{toggleAll:function(){this.$refs.selectAllBtn.blur(),e.toggleAll()}},components:{"modal-tabs":gl.issueBoards.ModalTabs,modalFilters:n.a},template:'\n      <div>\n        <header class="add-issues-header form-actions">\n          <h2>\n            Add issues\n            <button\n              type="button"\n              class="close"\n              data-dismiss="modal"\n              aria-label="Close"\n              @click="toggleModal(false)">\n              <span aria-hidden="true">Ã—</span>\n            </button>\n          </h2>\n        </header>\n        <modal-tabs v-if="!loading && issuesCount > 0"></modal-tabs>\n        <div\n          class="add-issues-search append-bottom-10"\n          v-if="showSearch">\n          <modal-filters :store="filter" />\n          <button\n            type="button"\n            class="btn btn-success btn-inverted prepend-left-10"\n            ref="selectAllBtn"\n            @click="toggleAll">\n            {{ selectAllText }}\n          </button>\n        </div>\n      </div>\n    '})}()},C5Ex:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("9rP8"),n=s("qqgg"),o=s("p52B"),a=gl.issueBoards.BoardsStore;t.default={name:"BoardList",props:{disabled:{type:Boolean,required:!0},list:{type:Object,required:!0},issues:{type:Array,required:!0},loading:{type:Boolean,required:!0},issueLinkBase:{type:String,required:!0},rootPath:{type:String,required:!0}},data:function(){return{scrollOffset:250,filters:a.state.filters,showCount:!1,showIssueForm:!1}},components:{boardCard:n.a,boardNewIssue:i.a},methods:{listHeight:function(){return this.$refs.list.getBoundingClientRect().height},scrollHeight:function(){return this.$refs.list.scrollHeight},scrollTop:function(){return this.$refs.list.scrollTop+this.listHeight()},loadNextPage:function(){var e=this,t=this.list.nextPage();t&&(this.list.loadingMore=!0,t.then(function(){e.list.loadingMore=!1}))},toggleForm:function(){this.showIssueForm=!this.showIssueForm},onScroll:function(){this.scrollTop()>this.scrollHeight()-this.scrollOffset&&!this.list.loadingMore&&this.loadNextPage()}},watch:{filters:{handler:function(){this.list.loadingMore=!1,this.$refs.list.scrollTop=0},deep:!0},issues:function(){var e=this;this.$nextTick(function(){e.scrollHeight()<=e.listHeight()&&e.list.issuesSize>e.list.issues.length&&(e.list.page+=1,e.list.getIssues(!1)),e.scrollHeight()>Math.ceil(e.listHeight())?e.showCount=!0:e.showCount=!1})}},created:function(){o.a.$on("hide-issue-form-"+this.list.id,this.toggleForm)},mounted:function(){var e=this,t=gl.issueBoards.getBoardSortableDefaultOptions({scroll:document.querySelectorAll(".boards-list")[0],group:"issues",disabled:this.disabled,filter:".board-list-count, .is-disabled",dataIdAttr:"data-issue-id",onStart:function(t){var s=e.$refs.issue[t.oldIndex];s.showDetail=!1,a.moving.list=s.list,a.moving.issue=a.moving.list.findIssue(+t.item.dataset.issueId),gl.issueBoards.onStart()},onAdd:function(t){gl.issueBoards.BoardsStore.moveIssueToList(a.moving.list,e.list,a.moving.issue,t.newIndex),e.$nextTick(function(){t.item.remove()})},onUpdate:function(t){var s=e.sortable.toArray().filter(function(e){return"-1"!==e});gl.issueBoards.BoardsStore.moveIssueInList(e.list,a.moving.issue,t.oldIndex,t.newIndex,s)},onMove:function(e){return!e.related.classList.contains("board-list-count")}});this.sortable=Sortable.create(this.$refs.list,t),this.$refs.list.addEventListener("scroll",this.onScroll)},beforeDestroy:function(){o.a.$off("hide-issue-form-"+this.list.id,this.toggleForm),this.$refs.list.removeEventListener("scroll",this.onScroll)},template:'\n    <div class="board-list-component">\n      <div\n        class="board-list-loading text-center"\n        aria-label="Loading issues"\n        v-if="loading">\n        <i\n          class="fa fa-spinner fa-spin"\n          aria-hidden="true">\n        </i>\n      </div>\n      <board-new-issue\n        :list="list"\n        v-if="list.type !== \'closed\' && showIssueForm"/>\n      <ul\n        class="board-list"\n        v-show="!loading"\n        ref="list"\n        :data-board="list.id"\n        :class="{ \'is-smaller\': showIssueForm }">\n        <board-card\n          v-for="(issue, index) in issues"\n          ref="issue"\n          :index="index"\n          :list="list"\n          :issue="issue"\n          :issue-link-base="issueLinkBase"\n          :root-path="rootPath"\n          :disabled="disabled"\n          :key="issue.id" />\n        <li\n          class="board-list-count text-center"\n          v-if="showCount"\n          data-id="-1">\n          <i\n            class="fa fa-spinner fa-spin"\n            aria-label="Loading more issues"\n            aria-hidden="true"\n            v-show="list.loadingMore">\n          </i>\n          <span v-if="list.issues.length === list.issuesSize">\n            Showing all issues\n          </span>\n          <span v-else>\n            Showing {{ list.issues.length }} of {{ list.issuesSize }} issues\n          </span>\n        </li>\n      </ul>\n    </div>\n  '}},"DV+M":function(e,t){function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function e(t){s(this,e),this.id=t.id,this.title=t.title};window.ListMilestone=i},EVjf:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("JTVE");!function(){var e=gl.issueBoards.ModalStore;gl.issueBoards.ModalTabs=i.default.extend({mixins:[gl.issueBoards.ModalMixins],data:function(){return e.store},computed:{selectedCount:function(){return e.selectedCount()}},destroyed:function(){this.activeTab="all"},template:'\n      <div class="top-area prepend-top-10 append-bottom-10">\n        <ul class="nav-links issues-state-filters">\n          <li :class="{ \'active\': activeTab == \'all\' }">\n            <a\n              href="#"\n              role="button"\n              @click.prevent="changeTab(\'all\')">\n              Open issues\n              <span class="badge">\n                {{ issuesCount }}\n              </span>\n            </a>\n          </li>\n          <li :class="{ \'active\': activeTab == \'selected\' }">\n            <a\n              href="#"\n              role="button"\n              @click.prevent="changeTab(\'selected\')">\n              Selected issues\n              <span class="badge">\n                {{ selectedCount }}\n              </span>\n            </a>\n          </li>\n        </ul>\n      </div>\n    '})}()},HsL0:function(e,t,s){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=s("JTVE"),o=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=function(){function t(s,o,a){i(this,t),this.boards=n.default.resource(s+"{/id}.json",{},{issues:{method:"GET",url:s+"/"+a+"/issues.json"}}),this.lists=n.default.resource(s+"/"+a+"/lists{/id}",{},{generate:{method:"POST",url:s+"/"+a+"/lists/generate.json"}}),this.issue=n.default.resource(s+"/"+a+"/issues{/id}",{}),this.issues=n.default.resource(s+"/"+a+"/lists{/id}/issues",{},{bulkUpdate:{method:"POST",url:o}}),n.default.http.interceptors.push(function(t,s){t.headers["X-CSRF-Token"]=e.rails.csrfToken(),s()})}return o(t,[{key:"all",value:function(){return this.lists.get()}},{key:"generateDefaultLists",value:function(){return this.lists.generate({})}},{key:"createList",value:function(e){return this.lists.save({},{list:{label_id:e}})}},{key:"updateList",value:function(e,t){return this.lists.update({id:e},{list:{position:t}})}},{key:"destroyList",value:function(e){return this.lists.delete({id:e})}},{key:"getIssuesForList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={id:e};return Object.keys(t).forEach(function(e){s[e]=t[e]}),this.issues.get(s)}},{key:"moveIssue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return this.issue.update({id:e},{from_list_id:t,to_list_id:s,move_before_iid:i,move_after_iid:n})}},{key:"newIssue",value:function(e,t){return this.issues.save({id:e},{issue:t})}},{key:"getBacklog",value:function(e){return this.boards.issues(e)}},{key:"bulkUpdate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={update:Object.assign(t,{issuable_ids:e.join(",")})};return this.issues.bulkUpdate(s)}}]),t}();window.BoardService=a}).call(t,s("lwLq"))},IOf9:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("JTVE");!function(){var e=gl.issueBoards.BoardsStore;window.gl=window.gl||{},window.gl.issueBoards=window.gl.issueBoards||{},gl.issueBoards.RemoveIssueBtn=i.default.extend({props:{issue:{type:Object,required:!0},list:{type:Object,required:!0}},methods:{removeIssue:function(){var t=this.issue,s=t.getLists(),i=s.map(function(e){return e.label.id});gl.boardService.bulkUpdate([t.globalId],{remove_label_ids:i}).catch(function(){new Flash("Failed to remove issue from board, please try again.","alert"),s.forEach(function(e){e.addIssue(t)})}),s.forEach(function(e){e.removeIssue(t)}),e.detail.issue={}}},template:'\n      <div\n        class="block list"\n        v-if="list.type !== \'closed\'">\n        <button\n          class="btn btn-default btn-block"\n          type="button"\n          @click="removeIssue">\n          Remove from board\n        </button>\n      </div>\n    '})}()},IyBU:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=s("JTVE"),n=s("7UJR"),o=s.n(n),a=s("s61N"),l=s("p52B");s("Xfhe"),s("Omkx"),s("K8NX"),s("DV+M"),s("q2p8"),s("f7wA"),s("q4Fq"),s("HsL0"),s("aKLL"),s("TQdT"),s("qMC/"),s("1kZT"),s("3FuG"),s("dzNA"),s("lgdU"),s("wFzz"),i.default.use(o.a),e(function(){var t=document.getElementById("board-app"),s=gl.issueBoards.BoardsStore,n=gl.issueBoards.ModalStore;window.gl=window.gl||{},gl.IssueBoardsApp&&gl.IssueBoardsApp.$destroy(!0),s.create(),gl.issueBoards.boardStoreIssueSet=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.set.apply(i.default,[s.detail.issue].concat(t))},gl.issueBoards.boardStoreIssueDelete=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default.delete.apply(i.default,[s.detail.issue].concat(t))},gl.IssueBoardsApp=new i.default({el:t,components:{board:gl.issueBoards.Board,"board-sidebar":gl.issueBoards.BoardSidebar,"board-add-issues-modal":gl.issueBoards.IssuesModal},data:{state:s.state,loading:!0,endpoint:t.dataset.endpoint,boardId:t.dataset.boardId,disabled:"true"===t.dataset.disabled,issueLinkBase:t.dataset.issueLinkBase,rootPath:t.dataset.rootPath,bulkUpdatePath:t.dataset.bulkUpdatePath,detailIssue:s.detail},computed:{detailIssueVisible:function(){return Object.keys(this.detailIssue.issue).length}},created:function(){gl.boardService=new BoardService(this.endpoint,this.bulkUpdatePath,this.boardId),this.filterManager=new a.a(s.filter,!0),l.a.$on("updateTokens",this.updateTokens)},beforeDestroy:function(){l.a.$off("updateTokens",this.updateTokens)},mounted:function(){var e=this;s.disabled=this.disabled,gl.boardService.all().then(function(t){t.json().forEach(function(e){var t=s.addList(e);"closed"===t.type&&(t.position=1/0)}),e.state.lists=_.sortBy(e.state.lists,"position"),s.addBlankState(),e.loading=!1})},methods:{updateTokens:function(){this.filterManager.updateTokens()}}}),gl.IssueBoardsSearch=new i.default({el:document.getElementById("js-add-list"),data:{filters:s.state.filters},mounted:function(){gl.issueBoards.newListDropdownInit()}}),gl.IssueBoardsModalAddBtn=new i.default({mixins:[gl.issueBoards.ModalMixins],el:document.getElementById("js-add-issues-btn"),data:{modal:n.store,store:s.state},watch:{disabled:function(){this.updateTooltip()}},computed:{disabled:function(){return!this.store.lists.filter(function(e){return"blank"!==e.type&&"done"!==e.type}).length},tooltipTitle:function(){return this.disabled?"Please add a list to your board first":""}},methods:{updateTooltip:function(){var t=this,s=e(this.$el);this.$nextTick(function(){t.disabled?s.tooltip():s.tooltip("destroy")})},openModal:function(){this.disabled||this.toggleModal(!0)}},mounted:function(){this.updateTooltip()},template:'\n      <button\n        class="btn btn-create pull-right prepend-left-10"\n        type="button"\n        data-placement="bottom"\n        :class="{ \'disabled\': disabled }"\n        :title="tooltipTitle"\n        :aria-disabled="disabled"\n        @click="openModal">\n        Add issues\n      </button>\n    '})})}).call(t,s("lwLq"))},K8NX:function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=s("AN7F"),o=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=function(){function e(t){i(this,e),this.id=t.id,this._uid=this.guid(),this.position=t.position,this.title=t.title,this.type=t.list_type,this.preset=["closed","blank"].indexOf(this.type)>-1,this.page=1,this.loading=!0,this.loadingMore=!1,this.issues=[],this.issuesSize=0,t.label&&(this.label=new ListLabel(t.label)),"blank"!==this.type&&this.id&&this.getIssues()}return o(e,[{key:"guid",value:function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"save",value:function(){var e=this;return gl.boardService.createList(this.label.id).then(function(t){var s=t.json();return e.id=s.id,e.type=s.list_type,e.position=s.position,e.getIssues()})}},{key:"destroy",value:function(){var e=gl.issueBoards.BoardsStore.state.lists.indexOf(this);gl.issueBoards.BoardsStore.state.lists.splice(e,1),gl.issueBoards.BoardsStore.updateNewListDropdown(this.id),gl.boardService.destroyList(this.id)}},{key:"update",value:function(){gl.boardService.updateList(this.id,this.position)}},{key:"nextPage",value:function(){if(this.issuesSize>this.issues.length)return this.issues.length/20>=1&&(this.page+=1),this.getIssues(!1)}},{key:"getIssues",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=s.i(n.a)(gl.issueBoards.BoardsStore.filter.path,{page:this.page});return this.label&&i.label_name&&(i.label_name=i.label_name.filter(function(t){return t!==e.label.title})),t&&(this.loading=!0),gl.boardService.getIssuesForList(this.id,i).then(function(s){var i=s.json();e.loading=!1,e.issuesSize=i.size,t&&(e.issues=[]),e.createIssues(i.issues)})}},{key:"newIssue",value:function(e){return this.addIssue(e),this.issuesSize+=1,gl.boardService.newIssue(this.id,e).then(function(t){var s=t.json();e.id=s.iid})}},{key:"createIssues",value:function(e){var t=this;e.forEach(function(e){t.addIssue(new ListIssue(e))})}},{key:"addIssue",value:function(e,t,s){var i=null,n=null;this.findIssue(e.id)||(void 0!==s?(this.issues.splice(s,0,e),this.issues[s-1]&&(i=this.issues[s-1].id),this.issues[s+1]&&(n=this.issues[s+1].id)):this.issues.push(e),this.label&&e.addLabel(this.label),t&&(this.issuesSize+=1,this.updateIssueLabel(e,t,i,n)))}},{key:"moveIssue",value:function(e,t,s,i,n){this.issues.splice(t,1),this.issues.splice(s,0,e),gl.boardService.moveIssue(e.id,null,null,i,n)}},{key:"updateIssueLabel",value:function(e,t,s,i){gl.boardService.moveIssue(e.id,t.id,this.id,s,i)}},{key:"findIssue",value:function(e){return this.issues.filter(function(t){return t.id===e})[0]}},{key:"removeIssue",value:function(e){var t=this;this.issues=this.issues.filter(function(s){var i=e.id===s.id;return i&&(t.issuesSize-=1,s.removeLabel(t.label)),!i})}}]),e}();window.List=a},Omkx:function(e,t){function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function e(t){s(this,e),this.id=t.id,this.title=t.title,this.color=t.color,this.textColor=t.text_color,this.description=t.description,this.priority=null!==t.priority?t.priority:1/0};window.ListLabel=i},Pn7F:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("JTVE");!function(){var e=gl.issueBoards.ModalStore;gl.issueBoards.ModalList=i.default.extend({props:{issueLinkBase:{type:String,required:!0},rootPath:{type:String,required:!0},image:{type:String,required:!0}},data:function(){return e.store},watch:{activeTab:function(){"all"===this.activeTab&&e.purgeUnselectedIssues()}},computed:{loopIssues:function(){return"all"===this.activeTab?this.issues:this.selectedIssues},groupedIssues:function(){var e=this,t=[];return this.loopIssues.forEach(function(s,i){var n=i%e.columns;t[n]||t.push([]),t[n].push(s)}),t}},methods:{scrollHandler:function(){var e=Math.floor(this.issues.length/this.perPage);this.scrollTop()>this.scrollHeight()-100&&!this.loadingNewPage&&e===this.page&&(this.loadingNewPage=!0,this.page+=1)},toggleIssue:function(t,s){"A"!==t.target.tagName&&e.toggleIssue(s)},listHeight:function(){return this.$refs.list.getBoundingClientRect().height},scrollHeight:function(){return this.$refs.list.scrollHeight},scrollTop:function(){return this.$refs.list.scrollTop+this.listHeight()},showIssue:function(t){return"all"===this.activeTab||-1!==e.selectedIssueIndex(t)},setColumnCount:function(){var e=bp.getBreakpointSize();this.columns="lg"===e||"md"===e?3:"sm"===e?2:1}},mounted:function(){this.scrollHandlerWrapper=this.scrollHandler.bind(this),this.setColumnCountWrapper=this.setColumnCount.bind(this),this.setColumnCount(),this.$refs.list.addEventListener("scroll",this.scrollHandlerWrapper),window.addEventListener("resize",this.setColumnCountWrapper)},beforeDestroy:function(){this.$refs.list.removeEventListener("scroll",this.scrollHandlerWrapper),window.removeEventListener("resize",this.setColumnCountWrapper)},components:{"issue-card-inner":gl.issueBoards.IssueCardInner},template:'\n      <section\n        class="add-issues-list add-issues-list-columns"\n        ref="list">\n        <div\n          class="empty-state add-issues-empty-state-filter text-center"\n          v-if="issuesCount > 0 && issues.length === 0">\n          <div\n            class="svg-content"\n            v-html="image">\n          </div>\n          <div class="text-content">\n            <h4>\n              There are no issues to show.\n            </h4>\n          </div>\n        </div>\n        <div\n          v-for="group in groupedIssues"\n          class="add-issues-list-column">\n          <div\n            v-for="issue in group"\n            v-if="showIssue(issue)"\n            class="card-parent">\n            <div\n              class="card"\n              :class="{ \'is-active\': issue.selected }"\n              @click="toggleIssue($event, issue)">\n              <issue-card-inner\n                :issue="issue"\n                :issue-link-base="issueLinkBase"\n                :root-path="rootPath">\n              </issue-card-inner>\n              <span\n                :aria-label="\'Issue #\' + issue.id + \' selected\'"\n                aria-checked="true"\n                v-if="issue.selected"\n                class="issue-card-selected text-center">\n                <i class="fa fa-check"></i>\n              </span>\n            </div>\n          </div>\n        </div>\n      </section>\n    '})}()},TQdT:function(e,t,s){(function(e){!function(t){window.gl=window.gl||{},window.gl.issueBoards=window.gl.issueBoards||{},gl.issueBoards.onStart=function(){e(".has-tooltip").tooltip("hide").tooltip("disable"),document.body.classList.add("is-dragging")},gl.issueBoards.onEnd=function(){e(".has-tooltip").tooltip("enable"),document.body.classList.remove("is-dragging")},gl.issueBoards.touchEnabled="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,gl.issueBoards.getBoardSortableDefaultOptions=function(e){var t={animation:200,forceFallback:!0,fallbackClass:"is-dragging",fallbackOnBody:!0,ghostClass:"is-ghost",filter:".board-delete, .btn",delay:gl.issueBoards.touchEnabled?100:0,scrollSensitivity:gl.issueBoards.touchEnabled?60:100,scrollSpeed:20,onStart:gl.issueBoards.onStart,onEnd:gl.issueBoards.onEnd};return Object.keys(e).forEach(function(s){t[s]=e[s]}),t}}(window)}).call(t,s("lwLq"))},VVVP:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("JTVE");!function(){var e=gl.issueBoards.ModalStore;gl.issueBoards.ModalFooterListsDropdown=i.default.extend({data:function(){return{modal:e.store,state:gl.issueBoards.BoardsStore.state}},computed:{selected:function(){return this.modal.selectedList||this.state.lists[0]}},destroyed:function(){this.modal.selectedList=null},template:'\n      <div class="dropdown inline">\n        <button\n          class="dropdown-menu-toggle"\n          type="button"\n          data-toggle="dropdown"\n          aria-expanded="false">\n          <span\n            class="dropdown-label-box"\n            :style="{ backgroundColor: selected.label.color }">\n          </span>\n          {{ selected.title }}\n          <i class="fa fa-chevron-down"></i>\n        </button>\n        <div class="dropdown-menu dropdown-menu-selectable dropdown-menu-drop-up">\n          <ul>\n            <li\n              v-for="list in state.lists"\n              v-if="list.type == \'label\'">\n              <a\n                href="#"\n                role="button"\n                :class="{ \'is-active\': list.id == selected.id }"\n                @click.prevent="modal.selectedList = list">\n                <span\n                  class="dropdown-label-box"\n                  :style="{ backgroundColor: list.label.color }">\n                </span>\n                {{ list.title }}\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    '})}()},Xfhe:function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=s("JTVE"),o=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=function(){function e(t){var s=this;i(this,e),this.globalId=t.id,this.id=t.iid,this.title=t.title,this.confidential=t.confidential,this.dueDate=t.due_date,this.subscribed=t.subscribed,this.labels=[],this.selected=!1,this.assignee=!1,this.position=t.relative_position||1/0,t.assignee&&(this.assignee=new ListUser(t.assignee)),t.milestone&&(this.milestone=new ListMilestone(t.milestone)),t.labels.forEach(function(e){s.labels.push(new ListLabel(e))})}return o(e,[{key:"addLabel",value:function(e){this.findLabel(e)||this.labels.push(new ListLabel(e))}},{key:"findLabel",value:function(e){return this.labels.filter(function(t){return t.title===e.title})[0]}},{key:"removeLabel",value:function(e){e&&(this.labels=this.labels.filter(function(t){return e.title!==t.title}))}},{key:"removeLabels",value:function(e){e.forEach(this.removeLabel.bind(this))}},{key:"getLists",value:function(){var e=this;return gl.issueBoards.BoardsStore.state.lists.filter(function(t){return t.findIssue(e.id)})}},{key:"update",value:function(e){var t={issue:{milestone_id:this.milestone?this.milestone.id:null,due_date:this.dueDate,assignee_id:this.assignee?this.assignee.id:null,label_ids:this.labels.map(function(e){return e.id})}};return t.issue.label_ids.length||(t.issue.label_ids=[""]),n.default.http.patch(e,t)}}]),e}();window.ListIssue=a},aKLL:function(e,t){!function(){var e=gl.issueBoards.ModalStore;gl.issueBoards.ModalMixins={methods:{toggleModal:function(t){e.store.showAddIssuesModal=t},changeTab:function(t){e.store.activeTab=t}}}}()},dzNA:function(e,t,s){(function(e){!function(){window.gl=window.gl||{},window.gl.issueBoards=window.gl.issueBoards||{};var t=gl.issueBoards.BoardsStore;e(document).off("created.label").on("created.label",function(e,s){t.new({title:s.title,position:t.state.lists.length-2,list_type:"label",label:{id:s.id,title:s.title,color:s.color}})}),gl.issueBoards.newListDropdownInit=function(){e(".js-new-board-list").each(function(){var s=e(this);new gl.CreateLabelDropdown(s.closest(".dropdown").find(".dropdown-new-label"),s.data("namespace-path"),s.data("project-path")),s.glDropdown({data:function(t,i){e.get(s.attr("data-labels")).then(function(e){i(e)})},renderRow:function(s){var i=t.findList("title",s.title),n=e("<li />"),o=e("<a />",{class:i?"is-active js-board-list-"+i.id:"",text:s.title,href:"#"}),a=e("<span />",{class:"dropdown-label-box",style:"background-color: "+s.color});return n.append(o.prepend(a))},search:{fields:["title"]},filterable:!0,selectable:!0,multiSelect:!0,clicked:function(e,s,i){i.preventDefault(),t.findList("title",e.title)||(t.new({title:e.title,position:t.state.lists.length-2,list_type:"label",label:{id:e.id,title:e.title,color:e.color}}),t.state.lists=_.sortBy(t.state.lists,"position"))}})})}}()}).call(t,s("lwLq"))},eqGL:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("JTVE");!function(){var e=gl.issueBoards.ModalStore;gl.issueBoards.ModalEmptyState=i.default.extend({mixins:[gl.issueBoards.ModalMixins],data:function(){return e.store},props:{image:{type:String,required:!0},newIssuePath:{type:String,required:!0}},computed:{contents:function(){var e={title:"You haven't added any issues to your project yet",content:"\n            An issue can be a bug, a todo or a feature request that needs to be\n            discussed in a project. Besides, issues are searchable and filterable.\n          "};return"selected"===this.activeTab&&(e.title="You haven't selected any issues yet",e.content="\n            Go back to <strong>Open issues</strong> and select some issues\n            to add to your board.\n          "),e}},template:'\n      <section class="empty-state">\n        <div class="row">\n          <div class="col-xs-12 col-sm-6 col-sm-push-6">\n            <aside class="svg-content" v-html="image"></aside>\n          </div>\n          <div class="col-xs-12 col-sm-6 col-sm-pull-6">\n            <div class="text-content">\n              <h4>{{ contents.title }}</h4>\n              <p v-html="contents.content"></p>\n              <a\n                :href="newIssuePath"\n                class="btn btn-success btn-inverted"\n                v-if="activeTab === \'all\'">\n                New issue\n              </a>\n              <button\n                type="button"\n                class="btn btn-default"\n                @click="changeTab(\'all\')"\n                v-if="activeTab === \'selected\'">\n                Open issues\n              </button>\n            </div>\n          </div>\n        </div>\n      </section>\n    '})}()},f7wA:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=s("yoQO"),n=s.n(i);!function(){window.gl=window.gl||{},window.gl.issueBoards=window.gl.issueBoards||{},gl.issueBoards.BoardsStore={disabled:!1,filter:{path:""},state:{},detail:{issue:{}},moving:{issue:{},list:{}},create:function(){this.state.lists=[],this.filter.path=gl.utils.getUrlParamsArray().join("&")},addList:function(e){var t=new List(e);return this.state.lists.push(t),t},new:function(e){var t=this;this.addList(e).save().then(function(){t.state.lists=_.sortBy(t.state.lists,"position")}),this.removeBlankState()},updateNewListDropdown:function(t){e(".js-board-list-"+t).removeClass("is-active")},shouldAddBlankState:function(){return!this.state.lists.filter(function(e){return"closed"!==e.type})[0]},addBlankState:function(){!this.shouldAddBlankState()||this.welcomeIsHidden()||this.disabled||(this.addList({id:"blank",list_type:"blank",title:"Welcome to your Issue Board!",position:0}),this.state.lists=_.sortBy(this.state.lists,"position"))},removeBlankState:function(){this.removeList("blank"),n.a.set("issue_board_welcome_hidden","true",{expires:3650,path:""})},welcomeIsHidden:function(){return"true"===n.a.get("issue_board_welcome_hidden")},removeList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank";this.findList("id",e,t)&&(this.state.lists=this.state.lists.filter(function(t){return t.id!==e}))},moveList:function(e,t){var s=this;t.forEach(function(e,t){s.findList("id",parseInt(e,10)).position=t}),e.update()},moveIssueToList:function(e,t,s,i){var n=t.findIssue(s.id),o=s.getLists(),a=o.map(function(e){return e.label});n?(t.updateIssueLabel(s,e),n.removeLabel(e.label)):t.addIssue(s,e,i),"closed"===t.type?(o.forEach(function(e){e.removeIssue(s)}),s.removeLabels(a)):e.removeIssue(s)},moveIssueInList:function(e,t,s,i,n){var o=parseInt(n[i-1],10)||null,a=parseInt(n[i+1],10)||null;e.moveIssue(t,s,i,o,a)},findList:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";return this.state.lists.filter(function(i){var n=!s||i.type===s;return i[e]===t&&n})[0]},updateFiltersUrl:function(){history.pushState(null,null,"?"+this.filter.path)}}}()}).call(t,s("lwLq"))},iqJG:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("JTVE");s("VVVP"),function(){var e=gl.issueBoards.ModalStore;gl.issueBoards.ModalFooter=i.default.extend({mixins:[gl.issueBoards.ModalMixins],data:function(){return{modal:e.store,state:gl.issueBoards.BoardsStore.state}},computed:{submitDisabled:function(){return!e.selectedCount()},submitText:function(){var t=e.selectedCount();return"Add "+(t>0?t:"")+" "+gl.text.pluralize("issue",t)}},methods:{addIssues:function(){var t=this.modal.selectedList||this.state.lists[0],s=e.getSelectedIssues(),i=s.map(function(e){return e.globalId});gl.boardService.bulkUpdate(i,{add_label_ids:[t.label.id]}).catch(function(){new Flash("Failed to update issues, please try again.","alert"),s.forEach(function(e){t.removeIssue(e),t.issuesSize-=1})}),s.forEach(function(e){t.addIssue(e),t.issuesSize+=1}),this.toggleModal(!1)}},components:{"lists-dropdown":gl.issueBoards.ModalFooterListsDropdown},template:'\n      <footer\n        class="form-actions add-issues-footer">\n        <div class="pull-left">\n          <button\n            class="btn btn-success"\n            type="button"\n            :disabled="submitDisabled"\n            @click="addIssues">\n            {{ submitText }}\n          </button>\n          <span class="inline add-issues-footer-to-list">\n            to list\n          </span>\n          <lists-dropdown></lists-dropdown>\n        </div>\n        <button\n          class="btn btn-default pull-right"\n          type="button"\n          @click="toggleModal(false)">\n          Cancel\n        </button>\n      </footer>\n    '})}()},lgdU:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("JTVE"),n=s("AN7F");s("AX9H"),s("Pn7F"),s("iqJG"),s("eqGL"),function(){var e=gl.issueBoards.ModalStore;gl.issueBoards.IssuesModal=i.default.extend({props:{blankStateImage:{type:String,required:!0},newIssuePath:{type:String,required:!0},issueLinkBase:{type:String,required:!0},rootPath:{type:String,required:!0},projectId:{type:Number,required:!0},milestonePath:{type:String,required:!0},labelPath:{type:String,required:!0}},data:function(){return e.store},watch:{page:function(){this.loadIssues()},showAddIssuesModal:function(){var e=this;this.showAddIssuesModal&&!this.issues.length?(this.loading=!0,this.loadIssues().then(function(){e.loading=!1})):this.showAddIssuesModal||(this.issues=[],this.selectedIssues=[],this.issuesCount=!1)},filter:{handler:function(){var e=this;this.$el.tagName&&(this.page=1,this.filterLoading=!0,this.loadIssues(!0).then(function(){e.filterLoading=!1}))},deep:!0}},methods:{loadIssues:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!!this.showAddIssuesModal&&gl.boardService.getBacklog(s.i(n.a)(this.filter.path,{page:this.page,per:this.perPage})).then(function(s){var n=s.json();i&&(t.issues=[]),n.issues.forEach(function(s){var i=new ListIssue(s),n=e.findSelectedIssue(i);i.selected=!!n,t.issues.push(i)}),t.loadingNewPage=!1,t.issuesCount||(t.issuesCount=n.size)})}},computed:{showList:function(){return"selected"===this.activeTab?this.selectedIssues.length>0:this.issuesCount>0},showEmptyState:function(){return!this.loading&&0===this.issuesCount||"selected"===this.activeTab&&0===this.selectedIssues.length}},created:function(){this.page=1},components:{"modal-header":gl.issueBoards.ModalHeader,"modal-list":gl.issueBoards.ModalList,"modal-footer":gl.issueBoards.ModalFooter,"empty-state":gl.issueBoards.ModalEmptyState},template:'\n      <div\n        class="add-issues-modal"\n        v-if="showAddIssuesModal">\n        <div class="add-issues-container">\n          <modal-header\n            :project-id="projectId"\n            :milestone-path="milestonePath"\n            :label-path="labelPath">\n          </modal-header>\n          <modal-list\n            :image="blankStateImage"\n            :issue-link-base="issueLinkBase"\n            :root-path="rootPath"\n            v-if="!loading && showList && !filterLoading"></modal-list>\n          <empty-state\n            v-if="showEmptyState"\n            :image="blankStateImage"\n            :new-issue-path="newIssuePath"></empty-state>\n          <section\n            class="add-issues-list text-center"\n            v-if="loading || filterLoading">\n            <div class="add-issues-list-loading">\n              <i class="fa fa-spinner fa-spin"></i>\n            </div>\n          </section>\n          <modal-footer></modal-footer>\n        </div>\n      </div>\n    '})}()},p52B:function(e,t,s){"use strict";var i=s("JTVE");t.a=new i.default},pXFb:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=s("JTVE"),n=s("p52B");!function(){var t=gl.issueBoards.BoardsStore;window.gl=window.gl||{},window.gl.issueBoards=window.gl.issueBoards||{},gl.issueBoards.IssueCardInner=i.default.extend({props:{issue:{type:Object,required:!0},issueLinkBase:{type:String,required:!0},list:{type:Object,required:!1,default:function(){return{}}},rootPath:{type:String,required:!0},updateFilters:{type:Boolean,required:!1,default:!1}},computed:{cardUrl:function(){return this.issueLinkBase+"/"+this.issue.id},assigneeUrl:function(){return""+this.rootPath+this.issue.assignee.username},assigneeUrlTitle:function(){return"Assigned to "+this.issue.assignee.name},avatarUrlTitle:function(){return"Avatar for "+this.issue.assignee.name},issueId:function(){return"#"+this.issue.id},showLabelFooter:function(){var e=this;return void 0!==this.issue.labels.find(function(t){return e.showLabel(t)})}},methods:{showLabel:function(e){return!this.list||(!this.list.label||e.id!==this.list.label.id)},filterByLabel:function(s,i){if(this.updateFilters){var o=gl.issueBoards.BoardsStore.filter.path.split("&"),a=encodeURIComponent(s.title),l="label_name[]="+a,r=o.indexOf(l);e(i.currentTarget).tooltip("hide"),-1===r?o.push(l):o.splice(r,1),gl.issueBoards.BoardsStore.filter.path=o.join("&"),t.updateFiltersUrl(),n.a.$emit("updateTokens")}},labelStyle:function(e){return{backgroundColor:e.color,color:e.textColor}}},template:'\n      <div>\n        <div class="card-header">\n          <h4 class="card-title">\n            <i\n              class="fa fa-eye-slash confidential-icon"\n              v-if="issue.confidential"\n              aria-hidden="true"\n            />\n            <a\n              class="js-no-trigger"\n              :href="cardUrl"\n              :title="issue.title">{{ issue.title }}</a>\n            <span\n              class="card-number"\n              v-if="issue.id"\n            >\n              {{ issueId }}\n            </span>\n          </h4>\n          <a\n            class="card-assignee has-tooltip js-no-trigger"\n            :href="assigneeUrl"\n            :title="assigneeUrlTitle"\n            v-if="issue.assignee"\n            data-container="body"\n          >\n            <img\n              class="avatar avatar-inline s20 js-no-trigger"\n              :src="issue.assignee.avatar"\n              width="20"\n              height="20"\n              :alt="avatarUrlTitle"\n            />\n          </a>\n        </div>\n        <div class="card-footer" v-if="showLabelFooter">\n          <button\n            class="label color-label has-tooltip js-no-trigger"\n            v-for="label in issue.labels"\n            type="button"\n            v-if="showLabel(label)"\n            @click="filterByLabel(label, $event)"\n            :style="labelStyle(label)"\n            :title="label.description"\n            data-container="body">\n            {{ label.title }}\n          </button>\n        </div>\n      </div>\n    '})}()}).call(t,s("lwLq"))},q2p8:function(e,t){function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function e(t){s(this,e),this.id=t.id,this.name=t.name,this.username=t.username,this.avatar=t.avatar_url};window.ListUser=i},q4Fq:function(e,t){function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}();!function(){window.gl=window.gl||{},window.gl.issueBoards=window.gl.issueBoards||{};var e=function(){function e(){s(this,e),this.store={columns:3,issues:[],issuesCount:!1,selectedIssues:[],showAddIssuesModal:!1,activeTab:"all",selectedList:null,searchTerm:"",loading:!1,loadingNewPage:!1,filterLoading:!1,page:1,perPage:50,filter:{path:""}}}return i(e,[{key:"selectedCount",value:function(){return this.getSelectedIssues().length}},{key:"toggleIssue",value:function(e){var t=e,s=t.selected;t.selected=!s,s?this.removeSelectedIssue(t):this.addSelectedIssue(t)}},{key:"toggleAll",value:function(){var e=this,t=this.selectedCount()!==this.store.issues.length;this.store.issues.forEach(function(s){var i=s;i.selected!==t&&(i.selected=t,t?e.addSelectedIssue(s):e.removeSelectedIssue(s))})}},{key:"getSelectedIssues",value:function(){return this.store.selectedIssues.filter(function(e){return e.selected})}},{key:"addSelectedIssue",value:function(e){-1===this.selectedIssueIndex(e)&&this.store.selectedIssues.push(e)}},{key:"removeSelectedIssue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];("all"===this.store.activeTab||t)&&(this.store.selectedIssues=this.store.selectedIssues.filter(function(t){return t.id!==e.id}))}},{key:"purgeUnselectedIssues",value:function(){var e=this;this.store.selectedIssues.forEach(function(t){t.selected||e.removeSelectedIssue(t,!0)})}},{key:"selectedIssueIndex",value:function(e){return this.store.selectedIssues.indexOf(e)}},{key:"findSelectedIssue",value:function(e){return this.store.selectedIssues.filter(function(t){return t.id===e.id})[0]}}]),e}();gl.issueBoards.ModalStore=new e}()},"qMC/":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s("JTVE").default.filter("due-date",function(e){var t=new Date(e);return dateFormat(t,"mmm d, yyyy",!0)})},qqgg:function(e,t,s){"use strict";s("pXFb");var i=gl.issueBoards.BoardsStore;t.a={name:"BoardsIssueCard",template:'\n    <li class="card"\n      :class="{ \'user-can-drag\': !disabled && issue.id, \'is-disabled\': disabled || !issue.id, \'is-active\': issueDetailVisible }"\n      :index="index"\n      :data-issue-id="issue.id"\n      @mousedown="mouseDown"\n      @mousemove="mouseMove"\n      @mouseup="showIssue($event)">\n      <issue-card-inner\n        :list="list"\n        :issue="issue"\n        :issue-link-base="issueLinkBase"\n        :root-path="rootPath"\n        :update-filters="true" />\n    </li>\n  ',components:{"issue-card-inner":gl.issueBoards.IssueCardInner},props:{list:Object,issue:Object,issueLinkBase:String,disabled:Boolean,index:Number,rootPath:String},data:function(){return{showDetail:!1,detailIssue:i.detail}},computed:{issueDetailVisible:function(){return this.detailIssue.issue&&this.detailIssue.issue.id===this.issue.id}},methods:{mouseDown:function(){this.showDetail=!0},mouseMove:function(){this.showDetail=!1},showIssue:function(e){e.target.classList.contains("js-no-trigger")||this.showDetail&&(this.showDetail=!1,i.detail.issue&&i.detail.issue.id===this.issue.id?i.detail.issue={}:(i.detail.issue=this.issue,i.detail.list=this.list))}}}},rFKb:function(e,t,s){"use strict";var i=s("s61N"),n=s("9/oB");t.a={name:"modal-filters",props:{store:{type:Object,required:!0}},mounted:function(){n.a.container=this.$el,this.filteredSearch=new i.a(this.store),this.filteredSearch.removeTokens(),this.filteredSearch.handleInputPlaceholder(),this.filteredSearch.toggleClearSearchButton()},destroyed:function(){this.filteredSearch.cleanup(),n.a.container=document,this.store.path=""},template:"#js-board-modal-filter"}},rP25:function(e,t,s){"use strict";var i=s("yoQO"),n=s.n(i),o=gl.issueBoards.BoardsStore;t.a={template:'\n    <div class="board-blank-state">\n      <p>\n        Add the following default lists to your Issue Board with one click:\n      </p>\n      <ul class="board-blank-state-list">\n        <li v-for="label in predefinedLabels">\n          <span\n            class="label-color"\n            :style="{ backgroundColor: label.color }">\n          </span>\n          {{ label.title }}\n        </li>\n      </ul>\n      <p>\n        Starting out with the default set of lists will get you right on the way to making the most of your board.\n      </p>\n      <button\n        class="btn btn-create btn-inverted btn-block"\n        type="button"\n        @click.stop="addDefaultLists">\n        Add default lists\n      </button>\n      <button\n        class="btn btn-default btn-block"\n        type="button"\n        @click.stop="clearBlankState">\n        Nevermind, I\'ll use my own\n      </button>\n    </div>\n  ',data:function(){return{predefinedLabels:[new ListLabel({title:"To Do",color:"#F0AD4E"}),new ListLabel({title:"Doing",color:"#5CB85C"})]}},methods:{addDefaultLists:function(){this.clearBlankState(),this.predefinedLabels.forEach(function(e,t){o.addList({title:e.title,position:t,list_type:"label",label:{title:e.title,color:e.color}})}),o.state.lists=_.sortBy(o.state.lists,"position"),gl.boardService.generateDefaultLists().then(function(e){e.json().forEach(function(e){var t=o.findList("title",e.title);t.id=e.id,t.label.id=e.label.id,t.getIssues()})}).catch(function(){o.removeList(void 0,"label"),n.a.remove("issue_board_welcome_hidden",{path:""}),o.addBlankState()})},clearBlankState:o.removeBlankState.bind(o)}}},s61N:function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=s("9/oB"),l=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),r=function(e){function t(e){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"boards"));return o.store=e,o.updateUrl=s,o.isHandledAsync=!0,o}return o(t,e),l(t,[{key:"updateObject",value:function(e){this.store.path=e.substr(1),this.updateUrl&&gl.issueBoards.BoardsStore.updateFiltersUrl()}},{key:"removeTokens",value:function(){var e=a.a.container.querySelectorAll(".js-visual-token");[].forEach.call(e,function(e){e.parentNode.removeChild(e)}),this.filteredSearchInput.value=""}},{key:"updateTokens",value:function(){this.removeTokens(),this.loadSearchParamsFromURL(),this.filteredSearchInput.dispatchEvent(new Event("input"))}}]),t}(gl.FilteredSearchManager);t.a=r},unKI:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=s("JTVE");!function(){window.gl=window.gl||{},window.gl.issueBoards=window.gl.issueBoards||{},gl.issueBoards.BoardDelete=i.default.extend({props:{list:Object},methods:{deleteBoard:function(){e(this.$el).tooltip("hide"),confirm("Are you sure you want to delete this list?")&&this.list.destroy()}}})}()}).call(t,s("lwLq"))}},["IyBU"]);
//# sourceMappingURL=boards.b7a8ecc657d2eaa0b711.bundle.js.map